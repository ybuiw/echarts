"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard").default;

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread2"));

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _react = _interopRequireWildcard(require("react"));

var echarts = _interopRequireWildcard(require("echarts/core"));

var _components = require("echarts/components");

var _charts = require("echarts/charts");

var _renderers = require("echarts/renderers");

echarts.use([_components.GridComponent, _components.TooltipComponent, _charts.BarChart, _renderers.CanvasRenderer]);

var EChartsBar = function EChartsBar(props) {
  var _props$width = props.width,
      width = _props$width === void 0 ? '100%' : _props$width,
      _props$height = props.height,
      height = _props$height === void 0 ? '100%' : _props$height,
      _props$colors = props.colors,
      colors = _props$colors === void 0 ? ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4', '#ea7ccc'] : _props$colors,
      _props$isHorizontal = props.isHorizontal,
      isHorizontal = _props$isHorizontal === void 0 ? false : _props$isHorizontal,
      _props$color = props.color,
      color = _props$color === void 0 ? '#333' : _props$color,
      _props$lineColor = props.lineColor,
      lineColor = _props$lineColor === void 0 ? '#abb9d0' : _props$lineColor,
      _props$splitColor = props.splitColor,
      splitColor = _props$splitColor === void 0 ? '#e0e7f3' : _props$splitColor,
      _props$fontSize = props.fontSize,
      fontSize = _props$fontSize === void 0 ? 14 : _props$fontSize,
      _props$data = props.data,
      data = _props$data === void 0 ? [] : _props$data,
      _props$xAxis = props.xAxis,
      xAxis = _props$xAxis === void 0 ? {} : _props$xAxis,
      _props$yAxis = props.yAxis,
      yAxis = _props$yAxis === void 0 ? {} : _props$yAxis,
      _props$grid = props.grid,
      grid = _props$grid === void 0 ? {} : _props$grid,
      _props$areaStyle = props.areaStyle,
      areaStyle = _props$areaStyle === void 0 ? {} : _props$areaStyle,
      _props$itemStyle = props.itemStyle,
      itemStyle = _props$itemStyle === void 0 ? {} : _props$itemStyle,
      _props$isSwitch = props.isSwitch,
      isSwitch = _props$isSwitch === void 0 ? false : _props$isSwitch,
      _props$switchTime = props.switchTime,
      switchTime = _props$switchTime === void 0 ? 2000 : _props$switchTime,
      onClick = props.onClick;
  var chartRef = (0, _react.useRef)(null);

  var _useState = (0, _react.useState)(null),
      _useState2 = (0, _slicedToArray2.default)(_useState, 2),
      myChart = _useState2[0],
      setMyChart = _useState2[1];

  var _useState3 = (0, _react.useState)(false),
      _useState4 = (0, _slicedToArray2.default)(_useState3, 1),
      isHigh = _useState4[0];

  var _useState5 = (0, _react.useState)(0),
      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),
      highIndex = _useState6[0],
      setHighIndex = _useState6[1];

  (0, _react.useEffect)(function () {
    var _myChart = echarts.init(chartRef.current);

    setMyChart(_myChart);
    window.addEventListener("resize", _myChart.resize, false);
    window.addEventListener('load', _myChart.resize, false);

    _myChart.off('click');

    _myChart.on('click', function (v) {
      onClick === null || onClick === void 0 ? void 0 : onClick(v.data);
      console.log(v.data);
    });

    return function () {
      console.log(2);
      window.removeEventListener('resize', _myChart.resize, false);
      window.removeEventListener('load', _myChart.resize, false);

      _myChart.dispose();
    };
  }, []);
  (0, _react.useEffect)(function () {
    if (myChart) {
      myChart.clear();
      var _names = [];
      data.length > 0 && data.map(function (item) {
        _names.push(item.name);
      });

      var _grid = (0, _objectSpread2.default)((0, _objectSpread2.default)({}, {
        top: '5%',
        bottom: '10%',
        left: '10%',
        right: '5%'
      }), grid);

      var _xAxis = {
        type: 'category',
        inverse: isHorizontal ? true : false,
        axisLabel: {
          color: xAxis.color ? xAxis.color : color,
          fontSize: xAxis.fontSize ? xAxis.fontSize : fontSize,
          rotate: xAxis.rotate ? xAxis.rotate : 0
        },
        axisLine: {
          show: xAxis.lineColor === false ? false : true,
          lineStyle: {
            color: xAxis.lineColor ? xAxis.lineColor : lineColor
          }
        },
        axisTick: {
          show: xAxis.isTick
        },
        splitLine: {
          show: xAxis.splitColor ? true : false,
          lineStyle: {
            color: xAxis.splitColor ? xAxis.splitColor : splitColor
          }
        },
        data: _names
      };
      var _yAxis = {
        name: yAxis.name,
        type: 'value',
        axisLabel: {
          color: yAxis.color ? yAxis.color : color,
          fontSize: yAxis.fontSize ? yAxis.fontSize : fontSize
        },
        axisLine: {
          show: yAxis.lineColor === false ? false : true,
          lineStyle: {
            color: yAxis.lineColor ? yAxis.lineColor : lineColor
          }
        },
        axisTick: {
          show: false
        },
        splitLine: {
          show: yAxis.splitColor === false ? false : true,
          lineStyle: {
            color: yAxis.splitColor ? yAxis.splitColor : splitColor
          }
        }
      };

      var _areaColor;

      if (areaStyle.isGrad) {
        if (Array.isArray(areaStyle.color) && areaStyle.color.length > 1) {
          _areaColor = {
            type: 'linear',
            x: 0,
            y: 0,
            x2: 0,
            y2: 1,
            colorStops: [{
              offset: 0,
              color: areaStyle.color[0]
            }, {
              offset: 1,
              color: areaStyle.color[1]
            }],
            global: false
          };
        } else {
          _areaColor = {
            type: 'linear',
            x: 0,
            y: 0,
            x2: 0,
            y2: 1,
            colorStops: [{
              offset: 0,
              color: colors[0]
            }, {
              offset: 1,
              color: 'rgba(255,255,255,0)'
            }],
            global: false
          };
        }
      }

      myChart.setOption({
        tooltip: {
          trigger: 'axis',
          transitionDuration: 0,
          enterable: true,
          axisPointer: {
            type: 'shadow'
          }
        },
        color: colors,
        grid: _grid,
        xAxis: isHorizontal ? _yAxis : _xAxis,
        yAxis: isHorizontal ? _xAxis : _yAxis,
        series: [{
          data: data,
          type: 'bar',
          barWidth: itemStyle.barWidth,
          itemStyle: {
            color: _areaColor,
            borderRadius: itemStyle.borderRadius ? itemStyle.borderRadius : 0
          }
        }]
      }, true);
    }
  }, [myChart, data]);
  (0, _react.useEffect)(function () {
    var faultByHourTime;

    if (myChart && isSwitch && !isHigh && data.length > 0) {
      faultByHourTime = setInterval(function () {
        setHighIndex(function (n) {
          myChart.dispatchAction({
            type: 'showTip',
            seriesIndex: 0,
            dataIndex: n
          });

          if (n >= data.length - 1) {
            return 0;
          } else {
            return n + 1;
          }
        });
      }, switchTime);
    }

    return function () {
      clearInterval(faultByHourTime);
    };
  }, [myChart, isSwitch, isHigh, data]);
  return /*#__PURE__*/_react.default.createElement("div", {
    ref: chartRef,
    style: {
      'width': width,
      'height': height
    }
  });
};

var _default = EChartsBar;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleC50c3giXSwibmFtZXMiOlsiZWNoYXJ0cyIsInVzZSIsIkdyaWRDb21wb25lbnQiLCJUb29sdGlwQ29tcG9uZW50IiwiQmFyQ2hhcnQiLCJDYW52YXNSZW5kZXJlciIsIkVDaGFydHNCYXIiLCJwcm9wcyIsIndpZHRoIiwiaGVpZ2h0IiwiY29sb3JzIiwiaXNIb3Jpem9udGFsIiwiY29sb3IiLCJsaW5lQ29sb3IiLCJzcGxpdENvbG9yIiwiZm9udFNpemUiLCJkYXRhIiwieEF4aXMiLCJ5QXhpcyIsImdyaWQiLCJhcmVhU3R5bGUiLCJpdGVtU3R5bGUiLCJpc1N3aXRjaCIsInN3aXRjaFRpbWUiLCJvbkNsaWNrIiwiY2hhcnRSZWYiLCJteUNoYXJ0Iiwic2V0TXlDaGFydCIsImlzSGlnaCIsImhpZ2hJbmRleCIsInNldEhpZ2hJbmRleCIsIl9teUNoYXJ0IiwiaW5pdCIsImN1cnJlbnQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVzaXplIiwib2ZmIiwib24iLCJ2IiwiY29uc29sZSIsImxvZyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwb3NlIiwiY2xlYXIiLCJfbmFtZXMiLCJsZW5ndGgiLCJtYXAiLCJpdGVtIiwicHVzaCIsIm5hbWUiLCJfZ3JpZCIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsIl94QXhpcyIsInR5cGUiLCJpbnZlcnNlIiwiYXhpc0xhYmVsIiwicm90YXRlIiwiYXhpc0xpbmUiLCJzaG93IiwibGluZVN0eWxlIiwiYXhpc1RpY2siLCJpc1RpY2siLCJzcGxpdExpbmUiLCJfeUF4aXMiLCJfYXJlYUNvbG9yIiwiaXNHcmFkIiwiQXJyYXkiLCJpc0FycmF5IiwieCIsInkiLCJ4MiIsInkyIiwiY29sb3JTdG9wcyIsIm9mZnNldCIsImdsb2JhbCIsInNldE9wdGlvbiIsInRvb2x0aXAiLCJ0cmlnZ2VyIiwidHJhbnNpdGlvbkR1cmF0aW9uIiwiZW50ZXJhYmxlIiwiYXhpc1BvaW50ZXIiLCJzZXJpZXMiLCJiYXJXaWR0aCIsImJvcmRlclJhZGl1cyIsImZhdWx0QnlIb3VyVGltZSIsInNldEludGVydmFsIiwibiIsImRpc3BhdGNoQWN0aW9uIiwic2VyaWVzSW5kZXgiLCJkYXRhSW5kZXgiLCJjbGVhckludGVydmFsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQUEsT0FBTyxDQUFDQyxHQUFSLENBQ0UsQ0FBQ0MseUJBQUQsRUFBZ0JDLDRCQUFoQixFQUFrQ0MsZ0JBQWxDLEVBQTRDQyx5QkFBNUMsQ0FERjs7QUErRUEsSUFBTUMsVUFBVSxHQUFHLFNBQWJBLFVBQWEsQ0FBQ0MsS0FBRCxFQUF5QjtBQUMxQyxxQkFrQklBLEtBbEJKLENBQ0VDLEtBREY7QUFBQSxNQUNFQSxLQURGLDZCQUNVLE1BRFY7QUFBQSxzQkFrQklELEtBbEJKLENBRUVFLE1BRkY7QUFBQSxNQUVFQSxNQUZGLDhCQUVXLE1BRlg7QUFBQSxzQkFrQklGLEtBbEJKLENBR0VHLE1BSEY7QUFBQSxNQUdFQSxNQUhGLDhCQUdXLENBQUMsU0FBRCxFQUFZLFNBQVosRUFBdUIsU0FBdkIsRUFBa0MsU0FBbEMsRUFBNkMsU0FBN0MsRUFBd0QsU0FBeEQsRUFBbUUsU0FBbkUsRUFBOEUsU0FBOUUsRUFBeUYsU0FBekYsQ0FIWDtBQUFBLDRCQWtCSUgsS0FsQkosQ0FJRUksWUFKRjtBQUFBLE1BSUVBLFlBSkYsb0NBSWlCLEtBSmpCO0FBQUEscUJBa0JJSixLQWxCSixDQUtFSyxLQUxGO0FBQUEsTUFLRUEsS0FMRiw2QkFLVSxNQUxWO0FBQUEseUJBa0JJTCxLQWxCSixDQU1FTSxTQU5GO0FBQUEsTUFNRUEsU0FORixpQ0FNYyxTQU5kO0FBQUEsMEJBa0JJTixLQWxCSixDQU9FTyxVQVBGO0FBQUEsTUFPRUEsVUFQRixrQ0FPZSxTQVBmO0FBQUEsd0JBa0JJUCxLQWxCSixDQVFFUSxRQVJGO0FBQUEsTUFRRUEsUUFSRixnQ0FRYSxFQVJiO0FBQUEsb0JB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LFlBQU07QUFDbEMzRCxRQUFBQSxZQUFZLENBQUMsVUFBQTRELENBQUMsRUFBSTtBQUNoQmhFLFVBQUFBLE9BQU8sQ0FBQ2lFLGNBQVIsQ0FBdUI7QUFDckJsQyxZQUFBQSxJQUFJLEVBQUUsU0FEZTtBQUVyQm1DLFlBQUFBLFdBQVcsRUFBRSxDQUZRO0FBR3JCQyxZQUFBQSxTQUFTLEVBQUVIO0FBSFUsV0FBdkI7O0FBS0EsY0FBSUEsQ0FBQyxJQUFJMUUsSUFBSSxDQUFDOEIsTUFBTCxHQUFjLENBQXZCLEVBQTBCO0FBQ3hCLG1CQUFPLENBQVA7QUFDRCxXQUZELE1BRU87QUFDTCxtQkFBTzRDLENBQUMsR0FBRyxDQUFYO0FBQ0Q7QUFDRixTQVhXLENBQVo7QUFZRCxPQWI0QixFQWExQm5FLFVBYjBCLENBQTdCO0FBY0Q7O0FBQ0QsV0FBTyxZQUFNO0FBQ1h1RSxNQUFBQSxhQUFhLENBQUNOLGVBQUQsQ0FBYjtBQUNELEtBRkQ7QUFHRCxHQXJCRCxFQXFCRyxDQUFDOUQsT0FBRCxFQUFVSixRQUFWLEVBQW9CTSxNQUFwQixFQUE0QlosSUFBNUIsQ0FyQkg7QUF1QkEsc0JBQ0U7QUFBSyxJQUFBLEdBQUcsRUFBRVMsUUFBVjtBQUNFLElBQUEsS0FBSyxFQUFFO0FBQ0wsZUFBU2pCLEtBREo7QUFFTCxnQkFBVUM7QUFGTDtBQURULElBREY7QUFRRCxDQXRNRDs7ZUF3TWVILFUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xyXG5cclxuaW1wb3J0ICogYXMgZWNoYXJ0cyBmcm9tICdlY2hhcnRzL2NvcmUnO1xyXG5pbXBvcnQgeyBHcmlkQ29tcG9uZW50LCBUb29sdGlwQ29tcG9uZW50LCBHcmlkQ29tcG9uZW50T3B0aW9uIH0gZnJvbSAnZWNoYXJ0cy9jb21wb25lbnRzJztcclxuaW1wb3J0IHsgQmFyQ2hhcnQgfSBmcm9tICdlY2hhcnRzL2NoYXJ0cyc7XHJcbmltcG9ydCB7IENhbnZhc1JlbmRlcmVyIH0gZnJvbSAnZWNoYXJ0cy9yZW5kZXJlcnMnO1xyXG5cclxuZWNoYXJ0cy51c2UoXHJcbiAgW0dyaWRDb21wb25lbnQsIFRvb2x0aXBDb21wb25lbnQsIEJhckNoYXJ0LCBDYW52YXNSZW5kZXJlcl1cclxuKTtcclxuXHJcbmludGVyZmFjZSB4QXhpc1Byb3BzIHtcclxuICBjb2xvcj86IHN0cmluZztcclxuICBmb250U2l6ZT86IG51bWJlcjtcclxuICBsaW5lQ29sb3I/OiBzdHJpbmcgfCBib29sZWFuO1xyXG4gIHNwbGl0Q29sb3I/OiBzdHJpbmcgfCBib29sZWFuO1xyXG4gIHJvdGF0ZT86IG51bWJlcjtcclxuICBpc1RpY2s/OiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgeUF4aXNQcm9wcyB7XHJcbiAgbmFtZT86IHN0cmluZztcclxuICBjb2xvcj86IHN0cmluZztcclxuICBmb250U2l6ZT86IG51bWJlcjtcclxuICBsaW5lQ29sb3I/OiBzdHJpbmcgfCBib29sZWFuO1xyXG4gIHNwbGl0Q29sb3I/OiBzdHJpbmcgfCBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgYXJlYVN0eWxlUHJvcHMge1xyXG4gIHNob3c/OiBib29sZWFuO1xyXG4gIGlzR3JhZD86IGJvb2xlYW47XHJcbiAgY29sb3I/OiBzdHJpbmdbXVxyXG59XHJcblxyXG5pbnRlcmZhY2UgaXRlbVN0eWxlUHJvcHMge1xyXG4gIGJhcldpZHRoPzogbnVtYmVyO1xyXG4gIGJvcmRlclJhZGl1cz86IG51bWJlcltdO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQmFyQmFzZVByb3BzIHtcclxuICBkYXRhPzogYW55W107XHJcbiAgd2lkdGg/OiBzdHJpbmc7XHJcbiAgaGVpZ2h0Pzogc3RyaW5nO1xyXG4gIC8qKiDmmK/lkKbmqKrmjpIgKi9cclxuICBpc0hvcml6b250YWw/OiBib29sZWFuO1xyXG4gIC8qKiDlrZfkvZPpopzoibIgKi9cclxuICBjb2xvcj86IHN0cmluZztcclxuICAvKiogeCwgeei9tOi9tOe6v+e6v+adoeminOiJsiAqL1xyXG4gIGxpbmVDb2xvcj86IHN0cmluZztcclxuICAvKiogeCwgeei9tOe9keagvOe6v+adoeminOiJsiAqL1xyXG4gIHNwbGl0Q29sb3I/OiBzdHJpbmc7XHJcbiAgLyoqIOWtl+S9k+Wkp+Wwj++8jOm7mOiupDE05YOP57SgICovXHJcbiAgZm9udFNpemU/OiBudW1iZXIgfCBzdHJpbmc7XHJcbiAgLyoqIOafseeKtuWbvuminOiJsiAqL1xyXG4gIGNvbG9ycz86IHN0cmluZ1tdO1xyXG4gIC8qKiDmmK/lkKboh6rliqjliIfmjaIgVG9vbHRpcCAqL1xyXG4gIGlzU3dpdGNoPzogYm9vbGVhbjtcclxuICAvKiog6Ieq5Yqo5YiH5o2i5LqL5Lu2IOm7mOiupCAyMDAw77yIMlPvvIkgKi9cclxuICBzd2l0Y2hUaW1lPzogbnVtYmVyO1xyXG4gIC8qKiDmn7Hnirblm77loavlhYXmoLflvI8gKi9cclxuICBhcmVhU3R5bGU/OiBhcmVhU3R5bGVQcm9wcztcclxuICAvKiog5p+x54q25Zu+5qC35byPICovXHJcbiAgaXRlbVN0eWxlPzogaXRlbVN0eWxlUHJvcHM7XHJcbiAgLyoqXHJcbiAgICogWCDovbTphY3nva5cclxuICAgKiBAY29sb3Ig5paH5a2X6aKc6ImyXHJcbiAgICogQHNpemUg5paH5a2X5aSn5bCPXHJcbiAgICogQGxpbmVDb2xvciB46L206L2057q/57q/5p2h6aKc6ImyLCBmYWxzZSDliJnkuI3mmL7npLpcclxuICAgKiBAc3BsaXRDb2xvciB46L20572R5qC857q/5p2h6aKc6ImyLCBmYWxzZSDliJnkuI3mmL7npLosIOm7mOiupHRydWVcclxuICAgKiBAcm90YXRlIOWIu+W6puagh+etvuaXi+i9rOinkuW6plxyXG4gICAqIEBpc1RpY2sg5piv5ZCm5pi+56S65Z2Q5qCH6L205Yi75bqmXHJcbiAgICovXHJcbiAgeEF4aXM/OiB4QXhpc1Byb3BzO1xyXG4gIC8qKlxyXG4gICAqIHkg6L206YWN572uXHJcbiAgICogQG5hbWUg5Z2Q5qCH6L205ZCN56ewXHJcbiAgICogQGNvbG9yIOaWh+Wtl+minOiJslxyXG4gICAqIEBzaXplIOaWh+Wtl+Wkp+Wwj1xyXG4gICAqIEBsaW5lQ29sb3Igeei9tOi9tOe6v+e6v+adoeminOiJsiwgZmFsc2Ug5YiZ5LiN5pi+56S6XHJcbiAgICogQHNwbGl0Q29sb3Igeei9tOe9keagvOe6v+adoeminOiJsiwgZmFsc2Ug5YiZ5LiN5pi+56S6LCDpu5jorqRmYWxzZVxyXG4gICAqL1xyXG4gIHlBeGlzPzogeUF4aXNQcm9wcztcclxuICBncmlkPzogR3JpZENvbXBvbmVudE9wdGlvbjtcclxuICBvbkNsaWNrPzogKHY6IGFueSkgPT4gdm9pZDtcclxufVxyXG5cclxuY29uc3QgRUNoYXJ0c0JhciA9IChwcm9wczogQmFyQmFzZVByb3BzKSA9PiB7XHJcbiAgY29uc3Qge1xyXG4gICAgd2lkdGggPSAnMTAwJScsXHJcbiAgICBoZWlnaHQgPSAnMTAwJScsXHJcbiAgICBjb2xvcnMgPSBbJyM1NDcwYzYnLCAnIzkxY2M3NScsICcjZmFjODU4JywgJyNlZTY2NjYnLCAnIzczYzBkZScsICcjM2JhMjcyJywgJyNmYzg0NTInLCAnIzlhNjBiNCcsICcjZWE3Y2NjJ10sXHJcbiAgICBpc0hvcml6b250YWwgPSBmYWxzZSxcclxuICAgIGNvbG9yID0gJyMzMzMnLFxyXG4gICAgbGluZUNvbG9yID0gJyNhYmI5ZDAnLFxyXG4gICAgc3BsaXRDb2xvciA9ICcjZTBlN2YzJyxcclxuICAgIGZvbnRTaXplID0gMTQsXHJcbiAgICBkYXRhID0gW10sXHJcbiAgICB4QXhpcyA9IHt9LFxyXG4gICAgeUF4aXMgPSB7fSxcclxuICAgIGdyaWQgPSB7fSxcclxuICAgIGFyZWFTdHlsZSA9IHt9LFxyXG4gICAgaXRlbVN0eWxlID0ge30sXHJcbiAgICBpc1N3aXRjaCA9IGZhbHNlLFxyXG4gICAgc3dpdGNoVGltZSA9IDIwMDAsXHJcbiAgICBvbkNsaWNrXHJcbiAgfSA9IHByb3BzO1xyXG5cclxuICBjb25zdCBjaGFydFJlZiA9IHVzZVJlZjxhbnk+KG51bGwpXHJcbiAgY29uc3QgW215Q2hhcnQsIHNldE15Q2hhcnRdID0gdXNlU3RhdGU8YW55PihudWxsKTtcclxuICBjb25zdCBbaXNIaWdoXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcclxuICBjb25zdCBbaGlnaEluZGV4LCBzZXRIaWdoSW5kZXhdID0gdXNlU3RhdGU8bnVtYmVyPigwKTtcclxuICBcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCBfbXlDaGFydDogYW55ID0gZWNoYXJ0cy5pbml0KGNoYXJ0UmVmLmN1cnJlbnQpO1xyXG4gICAgc2V0TXlDaGFydChfbXlDaGFydClcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBfbXlDaGFydC5yZXNpemUsIGZhbHNlKTtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgX215Q2hhcnQucmVzaXplLCBmYWxzZSk7XHJcbiAgICBfbXlDaGFydC5vZmYoJ2NsaWNrJyk7XHJcbiAgICBfbXlDaGFydC5vbignY2xpY2snLCAodjogYW55KSA9PiB7XHJcbiAgICAgIG9uQ2xpY2s/Lih2LmRhdGEpO1xyXG4gICAgICBjb25zb2xlLmxvZyh2LmRhdGEpXHJcbiAgICB9KVxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coMilcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIF9teUNoYXJ0LnJlc2l6ZSwgZmFsc2UpO1xyXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIF9teUNoYXJ0LnJlc2l6ZSwgZmFsc2UpO1xyXG4gICAgICBfbXlDaGFydC5kaXNwb3NlKCk7XHJcbiAgICB9XHJcbiAgfSwgW10pXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBpZiAobXlDaGFydCkge1xyXG4gICAgICBteUNoYXJ0LmNsZWFyKCk7XHJcbiAgICAgIGNvbnN0IF9uYW1lczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgZGF0YS5sZW5ndGggPiAwICYmIGRhdGEubWFwKChpdGVtOiBhbnkpID0+IHtcclxuICAgICAgICBfbmFtZXMucHVzaChpdGVtLm5hbWUpO1xyXG4gICAgICB9KVxyXG4gICAgICBjb25zdCBfZ3JpZDogR3JpZENvbXBvbmVudE9wdGlvbiA9IHsuLi57XHJcbiAgICAgICAgdG9wOiAnNSUnLFxyXG4gICAgICAgIGJvdHRvbTogJzEwJScsXHJcbiAgICAgICAgbGVmdDogJzEwJScsXHJcbiAgICAgICAgcmlnaHQ6ICc1JScsXHJcbiAgICAgIH0sIC4uLmdyaWR9O1xyXG4gICAgICBjb25zdCBfeEF4aXM6IGFueSA9IHtcclxuICAgICAgICB0eXBlOiAnY2F0ZWdvcnknLFxyXG4gICAgICAgIGludmVyc2U6IGlzSG9yaXpvbnRhbCA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICBheGlzTGFiZWw6IHtcclxuICAgICAgICAgIGNvbG9yOiB4QXhpcy5jb2xvciA/IHhBeGlzLmNvbG9yIDogY29sb3IsXHJcbiAgICAgICAgICBmb250U2l6ZTogeEF4aXMuZm9udFNpemUgPyB4QXhpcy5mb250U2l6ZSA6IGZvbnRTaXplLFxyXG4gICAgICAgICAgcm90YXRlOiB4QXhpcy5yb3RhdGUgPyB4QXhpcy5yb3RhdGUgOiAwLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYXhpc0xpbmU6IHtcclxuICAgICAgICAgIHNob3c6IHhBeGlzLmxpbmVDb2xvciA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWUsXHJcbiAgICAgICAgICBsaW5lU3R5bGU6IHtcclxuICAgICAgICAgICAgY29sb3I6IHhBeGlzLmxpbmVDb2xvciA/IHhBeGlzLmxpbmVDb2xvciA6IGxpbmVDb2xvcixcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGF4aXNUaWNrOiB7XHJcbiAgICAgICAgICBzaG93OiB4QXhpcy5pc1RpY2ssXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcGxpdExpbmU6IHtcclxuICAgICAgICAgIHNob3c6IHhBeGlzLnNwbGl0Q29sb3IgPyB0cnVlIDogZmFsc2UsXHJcbiAgICAgICAgICBsaW5lU3R5bGU6IHtcclxuICAgICAgICAgICAgY29sb3I6IHhBeGlzLnNwbGl0Q29sb3IgPyB4QXhpcy5zcGxpdENvbG9yIDogc3BsaXRDb2xvcixcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRhdGE6IF9uYW1lc1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IF95QXhpczogYW55ID0ge1xyXG4gICAgICAgIG5hbWU6IHlBeGlzLm5hbWUsXHJcbiAgICAgICAgdHlwZTogJ3ZhbHVlJyxcclxuICAgICAgICBheGlzTGFiZWw6IHtcclxuICAgICAgICAgIGNvbG9yOiB5QXhpcy5jb2xvciA/IHlBeGlzLmNvbG9yIDogY29sb3IsXHJcbiAgICAgICAgICBmb250U2l6ZTogeUF4aXMuZm9udFNpemUgPyB5QXhpcy5mb250U2l6ZSA6IGZvbnRTaXplLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYXhpc0xpbmU6IHtcclxuICAgICAgICAgIHNob3c6IHlBeGlzLmxpbmVDb2xvciA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWUsXHJcbiAgICAgICAgICBsaW5lU3R5bGU6IHtcclxuICAgICAgICAgICAgY29sb3I6IHlBeGlzLmxpbmVDb2xvciA/IHlBeGlzLmxpbmVDb2xvciA6IGxpbmVDb2xvcixcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBheGlzVGljazoge1xyXG4gICAgICAgICAgc2hvdzogZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcGxpdExpbmU6IHtcclxuICAgICAgICAgIHNob3c6IHlBeGlzLnNwbGl0Q29sb3IgPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlLFxyXG4gICAgICAgICAgbGluZVN0eWxlOiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiB5QXhpcy5zcGxpdENvbG9yID8geUF4aXMuc3BsaXRDb2xvciA6IHNwbGl0Q29sb3IsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgICBsZXQgX2FyZWFDb2xvcjogYW55O1xyXG4gICAgICBpZiAoYXJlYVN0eWxlLmlzR3JhZCkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFyZWFTdHlsZS5jb2xvcikgJiYgYXJlYVN0eWxlLmNvbG9yLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgIF9hcmVhQ29sb3IgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdsaW5lYXInLFxyXG4gICAgICAgICAgICB4OiAwLFxyXG4gICAgICAgICAgICB5OiAwLFxyXG4gICAgICAgICAgICB4MjogMCxcclxuICAgICAgICAgICAgeTI6IDEsXHJcbiAgICAgICAgICAgIGNvbG9yU3RvcHM6IFt7XHJcbiAgICAgICAgICAgICAgb2Zmc2V0OiAwLCBjb2xvcjogYXJlYVN0eWxlLmNvbG9yWzBdXHJcbiAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgIG9mZnNldDogMSwgY29sb3I6IGFyZWFTdHlsZS5jb2xvclsxXVxyXG4gICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgZ2xvYmFsOiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBfYXJlYUNvbG9yID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnbGluZWFyJyxcclxuICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgeDI6IDAsXHJcbiAgICAgICAgICAgIHkyOiAxLFxyXG4gICAgICAgICAgICBjb2xvclN0b3BzOiBbe1xyXG4gICAgICAgICAgICAgIG9mZnNldDogMCwgY29sb3I6IGNvbG9yc1swXVxyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgb2Zmc2V0OiAxLCBjb2xvcjogJ3JnYmEoMjU1LDI1NSwyNTUsMCknXHJcbiAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICBnbG9iYWw6IGZhbHNlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIG15Q2hhcnQuc2V0T3B0aW9uKHtcclxuICAgICAgICB0b29sdGlwOiB7XHJcbiAgICAgICAgICB0cmlnZ2VyOiAnYXhpcycsXHJcbiAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246IDAsXHJcbiAgICAgICAgICBlbnRlcmFibGU6IHRydWUsXHJcbiAgICAgICAgICBheGlzUG9pbnRlcjoge1xyXG4gICAgICAgICAgICB0eXBlOiAnc2hhZG93J1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29sb3I6IGNvbG9ycyxcclxuICAgICAgICBncmlkOiBfZ3JpZCxcclxuICAgICAgICB4QXhpczogaXNIb3Jpem9udGFsID8gX3lBeGlzIDogX3hBeGlzLFxyXG4gICAgICAgIHlBeGlzOiBpc0hvcml6b250YWwgPyBfeEF4aXMgOiBfeUF4aXMsXHJcbiAgICAgICAgc2VyaWVzOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXHJcbiAgICAgICAgICAgIHR5cGU6ICdiYXInLFxyXG4gICAgICAgICAgICBiYXJXaWR0aDogaXRlbVN0eWxlLmJhcldpZHRoLFxyXG4gICAgICAgICAgICBpdGVtU3R5bGU6IHtcclxuICAgICAgICAgICAgICBjb2xvcjogX2FyZWFDb2xvcixcclxuICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IGl0ZW1TdHlsZS5ib3JkZXJSYWRpdXMgPyBpdGVtU3R5bGUuYm9yZGVyUmFkaXVzIDogMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgICB9LCB0cnVlKTtcclxuICAgIH1cclxuICB9LCBbbXlDaGFydCwgZGF0YV0pXHJcbiAgXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGxldCBmYXVsdEJ5SG91clRpbWU6IGFueTtcclxuICAgIGlmIChteUNoYXJ0ICYmIGlzU3dpdGNoICYmICFpc0hpZ2ggJiYgZGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGZhdWx0QnlIb3VyVGltZSA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICBzZXRIaWdoSW5kZXgobiA9PiB7XHJcbiAgICAgICAgICBteUNoYXJ0LmRpc3BhdGNoQWN0aW9uKHtcclxuICAgICAgICAgICAgdHlwZTogJ3Nob3dUaXAnLFxyXG4gICAgICAgICAgICBzZXJpZXNJbmRleDogMCxcclxuICAgICAgICAgICAgZGF0YUluZGV4OiBuXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGlmIChuID49IGRhdGEubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuICsgMVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0sIHN3aXRjaFRpbWUpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICBjbGVhckludGVydmFsKGZhdWx0QnlIb3VyVGltZSlcclxuICAgIH1cclxuICB9LCBbbXlDaGFydCwgaXNTd2l0Y2gsIGlzSGlnaCwgZGF0YV0pXHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IHJlZj17Y2hhcnRSZWZ9XHJcbiAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgJ3dpZHRoJzogd2lkdGgsXHJcbiAgICAgICAgJ2hlaWdodCc6IGhlaWdodFxyXG4gICAgICB9fT5cclxuICAgIDwvZGl2PlxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRUNoYXJ0c0JhcjsiXX0=