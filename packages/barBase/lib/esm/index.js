import _objectSpread from "@babel/runtime/helpers/objectSpread2";
import _slicedToArray from "@babel/runtime/helpers/slicedToArray";
import React, { useEffect, useRef, useState } from 'react';
import * as echarts from 'echarts/core';
import { GridComponent, TooltipComponent } from 'echarts/components';
import { BarChart } from 'echarts/charts';
import { CanvasRenderer } from 'echarts/renderers';
echarts.use([GridComponent, TooltipComponent, BarChart, CanvasRenderer]);

var EChartsBar = function EChartsBar(props) {
  var _props$width = props.width,
      width = _props$width === void 0 ? '100%' : _props$width,
      _props$height = props.height,
      height = _props$height === void 0 ? '100%' : _props$height,
      _props$colors = props.colors,
      colors = _props$colors === void 0 ? ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4', '#ea7ccc'] : _props$colors,
      _props$color = props.color,
      color = _props$color === void 0 ? '#333' : _props$color,
      _props$lineColor = props.lineColor,
      lineColor = _props$lineColor === void 0 ? '#abb9d0' : _props$lineColor,
      _props$splitColor = props.splitColor,
      splitColor = _props$splitColor === void 0 ? '#e0e7f3' : _props$splitColor,
      _props$fontSize = props.fontSize,
      fontSize = _props$fontSize === void 0 ? 14 : _props$fontSize,
      _props$data = props.data,
      data = _props$data === void 0 ? [] : _props$data,
      _props$xAxis = props.xAxis,
      xAxis = _props$xAxis === void 0 ? {} : _props$xAxis,
      _props$yAxis = props.yAxis,
      yAxis = _props$yAxis === void 0 ? {} : _props$yAxis,
      _props$grid = props.grid,
      grid = _props$grid === void 0 ? {} : _props$grid,
      _props$areaStyle = props.areaStyle,
      areaStyle = _props$areaStyle === void 0 ? {} : _props$areaStyle,
      _props$itemStyle = props.itemStyle,
      itemStyle = _props$itemStyle === void 0 ? {} : _props$itemStyle,
      _props$isSwitch = props.isSwitch,
      isSwitch = _props$isSwitch === void 0 ? false : _props$isSwitch,
      _props$switchTime = props.switchTime,
      switchTime = _props$switchTime === void 0 ? 2000 : _props$switchTime,
      onClick = props.onClick;
  var chartRef = useRef(null);

  var _useState = useState(null),
      _useState2 = _slicedToArray(_useState, 2),
      myChart = _useState2[0],
      setMyChart = _useState2[1];

  var _useState3 = useState(false),
      _useState4 = _slicedToArray(_useState3, 1),
      isHigh = _useState4[0];

  var _useState5 = useState(0),
      _useState6 = _slicedToArray(_useState5, 2),
      highIndex = _useState6[0],
      setHighIndex = _useState6[1];

  useEffect(function () {
    var _myChart = echarts.init(chartRef.current);

    setMyChart(_myChart);
    window.addEventListener("resize", _myChart.resize, false);
    window.addEventListener('load', _myChart.resize, false);

    _myChart.off('click');

    _myChart.on('click', function (v) {
      onClick === null || onClick === void 0 ? void 0 : onClick(v.data);
      console.log(v.data);
    });

    return function () {
      console.log(2);
      window.removeEventListener('resize', _myChart.resize, false);
      window.removeEventListener('load', _myChart.resize, false);

      _myChart.dispose();
    };
  }, []);
  useEffect(function () {
    if (myChart) {
      myChart.clear();
      var _names = [];
      data.length > 0 && data.map(function (item) {
        _names.push(item.name);
      });

      var _grid = _objectSpread(_objectSpread({}, {
        top: '5%',
        bottom: '10%',
        left: '10%',
        right: '5%'
      }), grid);

      var _xAxis = {
        type: 'category',
        axisLabel: {
          color: xAxis.color ? xAxis.color : color,
          fontSize: xAxis.fontSize ? xAxis.fontSize : fontSize,
          rotate: xAxis.rotate ? xAxis.rotate : 0
        },
        axisLine: {
          show: xAxis.lineColor === false ? false : true,
          lineStyle: {
            color: xAxis.lineColor ? xAxis.lineColor : lineColor
          }
        },
        axisTick: {
          show: xAxis.isTick
        },
        splitLine: {
          show: xAxis.splitColor ? true : false,
          lineStyle: {
            color: xAxis.splitColor ? xAxis.splitColor : splitColor
          }
        },
        data: _names
      };
      var _yAxis = {
        name: yAxis.name,
        type: 'value',
        axisLabel: {
          color: yAxis.color ? yAxis.color : color,
          fontSize: yAxis.fontSize ? yAxis.fontSize : fontSize
        },
        axisLine: {
          show: yAxis.lineColor === false ? false : true,
          lineStyle: {
            color: yAxis.lineColor ? yAxis.lineColor : lineColor
          }
        },
        axisTick: {
          show: false
        },
        splitLine: {
          show: yAxis.splitColor === false ? false : true,
          lineStyle: {
            color: yAxis.splitColor ? yAxis.splitColor : splitColor
          }
        }
      };

      var _areaColor;

      if (areaStyle.isGrad) {
        if (Array.isArray(areaStyle.color) && areaStyle.color.length > 1) {
          _areaColor = {
            type: 'linear',
            x: 0,
            y: 0,
            x2: 0,
            y2: 1,
            colorStops: [{
              offset: 0,
              color: areaStyle.color[0]
            }, {
              offset: 1,
              color: areaStyle.color[1]
            }],
            global: false
          };
        } else {
          _areaColor = {
            type: 'linear',
            x: 0,
            y: 0,
            x2: 0,
            y2: 1,
            colorStops: [{
              offset: 0,
              color: colors[0]
            }, {
              offset: 1,
              color: 'rgba(255,255,255,0)'
            }],
            global: false
          };
        }
      }

      myChart.setOption({
        tooltip: {
          trigger: 'axis',
          transitionDuration: 0,
          enterable: true,
          axisPointer: {
            type: 'shadow'
          }
        },
        color: colors,
        grid: _grid,
        xAxis: _xAxis,
        yAxis: _yAxis,
        series: [{
          data: data,
          type: 'bar',
          barWidth: itemStyle.barWidth,
          itemStyle: {
            color: _areaColor,
            borderRadius: itemStyle.borderRadius ? itemStyle.borderRadius : 0
          }
        }]
      }, true);
    }
  }, [myChart, data]);
  useEffect(function () {
    var faultByHourTime;

    if (myChart && isSwitch && !isHigh && data.length > 0) {
      faultByHourTime = setInterval(function () {
        setHighIndex(function (n) {
          myChart.dispatchAction({
            type: 'showTip',
            seriesIndex: 0,
            dataIndex: n
          });

          if (n >= data.length - 1) {
            return 0;
          } else {
            return n + 1;
          }
        });
      }, switchTime);
    }

    return function () {
      clearInterval(faultByHourTime);
    };
  }, [myChart, isSwitch, isHigh, data]);
  return /*#__PURE__*/React.createElement("div", {
    ref: chartRef,
    style: {
      'width': width,
      'height': height
    }
  });
};

export default EChartsBar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleC50c3giXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsImVjaGFydHMiLCJHcmlkQ29tcG9uZW50IiwiVG9vbHRpcENvbXBvbmVudCIsIkJhckNoYXJ0IiwiQ2FudmFzUmVuZGVyZXIiLCJ1c2UiLCJFQ2hhcnRzQmFyIiwicHJvcHMiLCJ3aWR0aCIsImhlaWdodCIsImNvbG9ycyIsImNvbG9yIiwibGluZUNvbG9yIiwic3BsaXRDb2xvciIsImZvbnRTaXplIiwiZGF0YSIsInhBeGlzIiwieUF4aXMiLCJncmlkIiwiYXJlYVN0eWxlIiwiaXRlbVN0eWxlIiwiaXNTd2l0Y2giLCJzd2l0Y2hUaW1lIiwib25DbGljayIsImNoYXJ0UmVmIiwibXlDaGFydCIsInNldE15Q2hhcnQiLCJpc0hpZ2giLCJoaWdoSW5kZXgiLCJzZXRIaWdoSW5kZXgiLCJfbXlDaGFydCIsImluaXQiLCJjdXJyZW50Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2l6ZSIsIm9mZiIsIm9uIiwidiIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcG9zZSIsImNsZWFyIiwiX25hbWVzIiwibGVuZ3RoIiwibWFwIiwiaXRlbSIsInB1c2giLCJuYW1lIiwiX2dyaWQiLCJ0b3AiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJfeEF4aXMiLCJ0eXBlIiwiYXhpc0xhYmVsIiwicm90YXRlIiwiYXhpc0xpbmUiLCJzaG93IiwibGluZVN0eWxlIiwiYXhpc1RpY2siLCJpc1RpY2siLCJzcGxpdExpbmUiLCJfeUF4aXMiLCJfYXJlYUNvbG9yIiwiaXNHcmFkIiwiQXJyYXkiLCJpc0FycmF5IiwieCIsInkiLCJ4MiIsInkyIiwiY29sb3JTdG9wcyIsIm9mZnNldCIsImdsb2JhbCIsInNldE9wdGlvbiIsInRvb2x0aXAiLCJ0cmlnZ2VyIiwidHJhbnNpdGlvbkR1cmF0aW9uIiwiZW50ZXJhYmxlIiwiYXhpc1BvaW50ZXIiLCJzZXJpZXMiLCJiYXJXaWR0aCIsImJvcmRlclJhZGl1cyIsImZhdWx0QnlIb3VyVGltZSIsInNldEludGVydmFsIiwibiIsImRpc3BhdGNoQWN0aW9uIiwic2VyaWVzSW5kZXgiLCJkYXRhSW5kZXgiLCJjbGVhckludGVydmFsIl0sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU9BLEtBQVAsSUFBZ0JDLFNBQWhCLEVBQTJCQyxNQUEzQixFQUFtQ0MsUUFBbkMsUUFBbUQsT0FBbkQ7QUFFQSxPQUFPLEtBQUtDLE9BQVosTUFBeUIsY0FBekI7QUFDQSxTQUFTQyxhQUFULEVBQXdCQyxnQkFBeEIsUUFBcUUsb0JBQXJFO0FBQ0EsU0FBU0MsUUFBVCxRQUF5QixnQkFBekI7QUFDQSxTQUFTQyxjQUFULFFBQStCLG1CQUEvQjtBQUVBSixPQUFPLENBQUNLLEdBQVIsQ0FDRSxDQUFDSixhQUFELEVBQWdCQyxnQkFBaEIsRUFBa0NDLFFBQWxDLEVBQTRDQyxjQUE1QyxDQURGOztBQTZFQSxJQUFNRSxVQUFVLEdBQUcsU0FBYkEsVUFBYSxDQUFDQyxLQUFELEVBQTBCO0FBQUEscUJBa0J2Q0EsS0FsQnVDLENBRXpDQyxLQUZ5QztBQUFBLE1BRXpDQSxLQUZ5Qyw2QkFFakMsTUFGaUM7QUFBQSxzQkFrQnZDRCxLQWxCdUMsQ0FHekNFLE1BSHlDO0FBQUEsTUFHekNBLE1BSHlDLDhCQUdoQyxNQUhnQztBQUFBLHNCQWtCdkNGLEtBbEJ1QyxDQUl6Q0csTUFKeUM7QUFBQSxNQUl6Q0EsTUFKeUMsOEJBSWhDLENBQUMsU0FBRCxFQUFZLFNBQVosRUFBdUIsU0FBdkIsRUFBa0MsU0FBbEMsRUFBNkMsU0FBN0MsRUFBd0QsU0FBeEQsRUFBbUUsU0FBbkUsRUFBOEUsU0FBOUUsRUFBeUYsU0FBekYsQ0FKZ0M7QUFBQSxxQkFrQnZDSCxLQWxCdUMsQ0FLekNJLEtBTHlDO0FBQUEsTUFLekNBLEtBTHlDLDZCQUtqQyxNQUxpQztBQUFBLHlCQWtCdkNKLEtBbEJ1QyxDQU16Q0ssU0FOeUM7QUFB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ZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCAqIGFzIGVjaGFydHMgZnJvbSAnZWNoYXJ0cy9jb3JlJztcbmltcG9ydCB7IEdyaWRDb21wb25lbnQsIFRvb2x0aXBDb21wb25lbnQsIEdyaWRDb21wb25lbnRPcHRpb24gfSBmcm9tICdlY2hhcnRzL2NvbXBvbmVudHMnO1xuaW1wb3J0IHsgQmFyQ2hhcnQgfSBmcm9tICdlY2hhcnRzL2NoYXJ0cyc7XG5pbXBvcnQgeyBDYW52YXNSZW5kZXJlciB9IGZyb20gJ2VjaGFydHMvcmVuZGVyZXJzJztcblxuZWNoYXJ0cy51c2UoXG4gIFtHcmlkQ29tcG9uZW50LCBUb29sdGlwQ29tcG9uZW50LCBCYXJDaGFydCwgQ2FudmFzUmVuZGVyZXJdXG4pO1xuXG5pbnRlcmZhY2UgeEF4aXNQcm9wcyB7XG4gIGNvbG9yPzogc3RyaW5nO1xuICBmb250U2l6ZT86IG51bWJlcjtcbiAgbGluZUNvbG9yPzogc3RyaW5nIHwgYm9vbGVhbjtcbiAgc3BsaXRDb2xvcj86IHN0cmluZyB8IGJvb2xlYW47XG4gIHJvdGF0ZT86IG51bWJlcjtcbiAgaXNUaWNrPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIHlBeGlzUHJvcHMge1xuICBuYW1lPzogc3RyaW5nO1xuICBjb2xvcj86IHN0cmluZztcbiAgZm9udFNpemU/OiBudW1iZXI7XG4gIGxpbmVDb2xvcj86IHN0cmluZyB8IGJvb2xlYW47XG4gIHNwbGl0Q29sb3I/OiBzdHJpbmcgfCBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgYXJlYVN0eWxlUHJvcHMge1xuICBzaG93PzogYm9vbGVhbjtcbiAgaXNHcmFkPzogYm9vbGVhbjtcbiAgY29sb3I/OiBzdHJpbmdbXVxufVxuXG5pbnRlcmZhY2UgaXRlbVN0eWxlUHJvcHMge1xuICBiYXJXaWR0aD86IG51bWJlcjtcbiAgYm9yZGVyUmFkaXVzPzogbnVtYmVyW107XG59XG5cbmludGVyZmFjZSBMaW5lQmFzZVByb3BzIHtcbiAgZGF0YT86IGFueVtdO1xuICB3aWR0aD86IHN0cmluZztcbiAgaGVpZ2h0Pzogc3RyaW5nO1xuICAvKiog5a2X5L2T6aKc6ImyICovXG4gIGNvbG9yPzogc3RyaW5nO1xuICAvKiogeCwgeei9tOi9tOe6v+e6v+adoeminOiJsiAqL1xuICBsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIC8qKiB4LCB56L20572R5qC857q/5p2h6aKc6ImyICovXG4gIHNwbGl0Q29sb3I/OiBzdHJpbmc7XG4gIC8qKiDlrZfkvZPlpKflsI/vvIzpu5jorqQxNOWDj+e0oCAqL1xuICBmb250U2l6ZT86IG51bWJlciB8IHN0cmluZztcbiAgLyoqIOafseeKtuWbvuminOiJsiAqL1xuICBjb2xvcnM/OiBzdHJpbmdbXTtcbiAgLyoqIOaYr+WQpuiHquWKqOWIh+aNoiBUb29sdGlwICovXG4gIGlzU3dpdGNoPzogYm9vbGVhbjtcbiAgLyoqIOiHquWKqOWIh+aNouS6i+S7tiDpu5jorqQgMjAwMO+8iDJT77yJICovXG4gIHN3aXRjaFRpbWU/OiBudW1iZXI7XG4gIC8qKiDmn7Hnirblm77loavlhYXmoLflvI8gKi9cbiAgYXJlYVN0eWxlPzogYXJlYVN0eWxlUHJvcHM7XG4gIC8qKiDmn7Hnirblm77moLflvI8gKi9cbiAgaXRlbVN0eWxlPzogaXRlbVN0eWxlUHJvcHM7XG4gIC8qKlxuICAgKiBYIOi9tOmFjee9rlxuICAgKiBAY29sb3Ig5paH5a2X6aKc6ImyXG4gICAqIEBzaXplIOaWh+Wtl+Wkp+Wwj1xuICAgKiBAbGluZUNvbG9yIHjovbTovbTnur/nur/mnaHpopzoibIsIGZhbHNlIOWImeS4jeaYvuekulxuICAgKiBAc3BsaXRDb2xvciB46L20572R5qC857q/5p2h6aKc6ImyLCBmYWxzZSDliJnkuI3mmL7npLosIOm7mOiupHRydWVcbiAgICogQHJvdGF0ZSDliLvluqbmoIfnrb7ml4vovazop5LluqZcbiAgICogQGlzVGljayDmmK/lkKbmmL7npLrlnZDmoIfovbTliLvluqZcbiAgICovXG4gIHhBeGlzPzogeEF4aXNQcm9wcztcbiAgLyoqXG4gICAqIHkg6L206YWN572uXG4gICAqIEBuYW1lIOWdkOagh+i9tOWQjeensFxuICAgKiBAY29sb3Ig5paH5a2X6aKc6ImyXG4gICAqIEBzaXplIOaWh+Wtl+Wkp+Wwj1xuICAgKiBAbGluZUNvbG9yIHnovbTovbTnur/nur/mnaHpopzoibIsIGZhbHNlIOWImeS4jeaYvuekulxuICAgKiBAc3BsaXRDb2xvciB56L20572R5qC857q/5p2h6aKc6ImyLCBmYWxzZSDliJnkuI3mmL7npLosIOm7mOiupGZhbHNlXG4gICAqL1xuICB5QXhpcz86IHlBeGlzUHJvcHM7XG4gIGdyaWQ/OiBHcmlkQ29tcG9uZW50T3B0aW9uO1xuICBvbkNsaWNrPzogKHY6IGFueSkgPT4gdm9pZDtcbn1cblxuY29uc3QgRUNoYXJ0c0JhciA9IChwcm9wczogTGluZUJhc2VQcm9wcykgPT4ge1xuICBjb25zdCB7XG4gICAgd2lkdGggPSAnMTAwJScsXG4gICAgaGVpZ2h0ID0gJzEwMCUnLFxuICAgIGNvbG9ycyA9IFsnIzU0NzBjNicsICcjOTFjYzc1JywgJyNmYWM4NTgnLCAnI2VlNjY2NicsICcjNzNjMGRlJywgJyMzYmEyNzInLCAnI2ZjODQ1MicsICcjOWE2MGI0JywgJyNlYTdjY2MnXSxcbiAgICBjb2xvciA9ICcjMzMzJyxcbiAgICBsaW5lQ29sb3IgPSAnI2FiYjlkMCcsXG4gICAgc3BsaXRDb2xvciA9ICcjZTBlN2YzJyxcbiAgICBmb250U2l6ZSA9IDE0LFxuICAgIGRhdGEgPSBbXSxcbiAgICB4QXhpcyA9IHt9LFxuICAgIHlBeGlzID0ge30sXG4gICAgZ3JpZCA9IHt9LFxuICAgIGFyZWFTdHlsZSA9IHt9LFxuICAgIGl0ZW1TdHlsZSA9IHt9LFxuICAgIGlzU3dpdGNoID0gZmFsc2UsXG4gICAgc3dpdGNoVGltZSA9IDIwMDAsXG4gICAgb25DbGlja1xuICB9ID0gcHJvcHM7XG5cbiAgY29uc3QgY2hhcnRSZWYgPSB1c2VSZWY8YW55PihudWxsKVxuICBjb25zdCBbbXlDaGFydCwgc2V0TXlDaGFydF0gPSB1c2VTdGF0ZTxhbnk+KG51bGwpO1xuICBjb25zdCBbaXNIaWdoXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcbiAgY29uc3QgW2hpZ2hJbmRleCwgc2V0SGlnaEluZGV4XSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XG4gIFxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IF9teUNoYXJ0OiBhbnkgPSBlY2hhcnRzLmluaXQoY2hhcnRSZWYuY3VycmVudCk7XG4gICAgc2V0TXlDaGFydChfbXlDaGFydClcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIF9teUNoYXJ0LnJlc2l6ZSwgZmFsc2UpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgX215Q2hhcnQucmVzaXplLCBmYWxzZSk7XG4gICAgX215Q2hhcnQub2ZmKCdjbGljaycpO1xuICAgIF9teUNoYXJ0Lm9uKCdjbGljaycsICh2OiBhbnkpID0+IHtcbiAgICAgIG9uQ2xpY2s/Lih2LmRhdGEpO1xuICAgICAgY29uc29sZS5sb2codi5kYXRhKVxuICAgIH0pXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKDIpXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgX215Q2hhcnQucmVzaXplLCBmYWxzZSk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIF9teUNoYXJ0LnJlc2l6ZSwgZmFsc2UpO1xuICAgICAgX215Q2hhcnQuZGlzcG9zZSgpO1xuICAgIH1cbiAgfSwgW10pXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobXlDaGFydCkge1xuICAgICAgbXlDaGFydC5jbGVhcigpO1xuICAgICAgY29uc3QgX25hbWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgZGF0YS5sZW5ndGggPiAwICYmIGRhdGEubWFwKChpdGVtOiBhbnkpID0+IHtcbiAgICAgICAgX25hbWVzLnB1c2goaXRlbS5uYW1lKTtcbiAgICAgIH0pXG4gICAgICBjb25zdCBfZ3JpZDogR3JpZENvbXBvbmVudE9wdGlvbiA9IHsuLi57XG4gICAgICAgIHRvcDogJzUlJyxcbiAgICAgICAgYm90dG9tOiAnMTAlJyxcbiAgICAgICAgbGVmdDogJzEwJScsXG4gICAgICAgIHJpZ2h0OiAnNSUnLFxuICAgICAgfSwgLi4uZ3JpZH07XG4gICAgICBjb25zdCBfeEF4aXM6IGFueSA9IHtcbiAgICAgICAgdHlwZTogJ2NhdGVnb3J5JyxcbiAgICAgICAgYXhpc0xhYmVsOiB7XG4gICAgICAgICAgY29sb3I6IHhBeGlzLmNvbG9yID8geEF4aXMuY29sb3IgOiBjb2xvcixcbiAgICAgICAgICBmb250U2l6ZTogeEF4aXMuZm9udFNpemUgPyB4QXhpcy5mb250U2l6ZSA6IGZvbnRTaXplLFxuICAgICAgICAgIHJvdGF0ZTogeEF4aXMucm90YXRlID8geEF4aXMucm90YXRlIDogMCxcbiAgICAgICAgfSxcbiAgICAgICAgYXhpc0xpbmU6IHtcbiAgICAgICAgICBzaG93OiB4QXhpcy5saW5lQ29sb3IgPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlLFxuICAgICAgICAgIGxpbmVTdHlsZToge1xuICAgICAgICAgICAgY29sb3I6IHhBeGlzLmxpbmVDb2xvciA/IHhBeGlzLmxpbmVDb2xvciA6IGxpbmVDb2xvcixcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGF4aXNUaWNrOiB7XG4gICAgICAgICAgc2hvdzogeEF4aXMuaXNUaWNrLFxuICAgICAgICB9LFxuICAgICAgICBzcGxpdExpbmU6IHtcbiAgICAgICAgICBzaG93OiB4QXhpcy5zcGxpdENvbG9yID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgIGxpbmVTdHlsZToge1xuICAgICAgICAgICAgY29sb3I6IHhBeGlzLnNwbGl0Q29sb3IgPyB4QXhpcy5zcGxpdENvbG9yIDogc3BsaXRDb2xvcixcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IF9uYW1lc1xuICAgICAgfVxuICAgICAgY29uc3QgX3lBeGlzOiBhbnkgPSB7XG4gICAgICAgIG5hbWU6IHlBeGlzLm5hbWUsXG4gICAgICAgIHR5cGU6ICd2YWx1ZScsXG4gICAgICAgIGF4aXNMYWJlbDoge1xuICAgICAgICAgIGNvbG9yOiB5QXhpcy5jb2xvciA/IHlBeGlzLmNvbG9yIDogY29sb3IsXG4gICAgICAgICAgZm9udFNpemU6IHlBeGlzLmZvbnRTaXplID8geUF4aXMuZm9udFNpemUgOiBmb250U2l6ZSxcbiAgICAgICAgfSxcbiAgICAgICAgYXhpc0xpbmU6IHtcbiAgICAgICAgICBzaG93OiB5QXhpcy5saW5lQ29sb3IgPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlLFxuICAgICAgICAgIGxpbmVTdHlsZToge1xuICAgICAgICAgICAgY29sb3I6IHlBeGlzLmxpbmVDb2xvciA/IHlBeGlzLmxpbmVDb2xvciA6IGxpbmVDb2xvcixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBheGlzVGljazoge1xuICAgICAgICAgIHNob3c6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICBzcGxpdExpbmU6IHtcbiAgICAgICAgICBzaG93OiB5QXhpcy5zcGxpdENvbG9yID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZSxcbiAgICAgICAgICBsaW5lU3R5bGU6IHtcbiAgICAgICAgICAgIGNvbG9yOiB5QXhpcy5zcGxpdENvbG9yID8geUF4aXMuc3BsaXRDb2xvciA6IHNwbGl0Q29sb3IsXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfVxuICAgICAgbGV0IF9hcmVhQ29sb3I6IGFueTtcbiAgICAgIGlmIChhcmVhU3R5bGUuaXNHcmFkKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFyZWFTdHlsZS5jb2xvcikgJiYgYXJlYVN0eWxlLmNvbG9yLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBfYXJlYUNvbG9yID0ge1xuICAgICAgICAgICAgdHlwZTogJ2xpbmVhcicsXG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIHgyOiAwLFxuICAgICAgICAgICAgeTI6IDEsXG4gICAgICAgICAgICBjb2xvclN0b3BzOiBbe1xuICAgICAgICAgICAgICBvZmZzZXQ6IDAsIGNvbG9yOiBhcmVhU3R5bGUuY29sb3JbMF1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IDEsIGNvbG9yOiBhcmVhU3R5bGUuY29sb3JbMV1cbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgZ2xvYmFsOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfYXJlYUNvbG9yID0ge1xuICAgICAgICAgICAgdHlwZTogJ2xpbmVhcicsXG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgIHgyOiAwLFxuICAgICAgICAgICAgeTI6IDEsXG4gICAgICAgICAgICBjb2xvclN0b3BzOiBbe1xuICAgICAgICAgICAgICBvZmZzZXQ6IDAsIGNvbG9yOiBjb2xvcnNbMF1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgb2Zmc2V0OiAxLCBjb2xvcjogJ3JnYmEoMjU1LDI1NSwyNTUsMCknXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGdsb2JhbDogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG15Q2hhcnQuc2V0T3B0aW9uKHtcbiAgICAgICAgdG9vbHRpcDoge1xuICAgICAgICAgIHRyaWdnZXI6ICdheGlzJyxcbiAgICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246IDAsXG4gICAgICAgICAgZW50ZXJhYmxlOiB0cnVlLFxuICAgICAgICAgIGF4aXNQb2ludGVyOiB7XG4gICAgICAgICAgICB0eXBlOiAnc2hhZG93J1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY29sb3I6IGNvbG9ycyxcbiAgICAgICAgZ3JpZDogX2dyaWQsXG4gICAgICAgIHhBeGlzOiBfeEF4aXMsXG4gICAgICAgIHlBeGlzOiBfeUF4aXMsXG4gICAgICAgIHNlcmllczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICB0eXBlOiAnYmFyJyxcbiAgICAgICAgICAgIGJhcldpZHRoOiBpdGVtU3R5bGUuYmFyV2lkdGgsXG4gICAgICAgICAgICBpdGVtU3R5bGU6IHtcbiAgICAgICAgICAgICAgY29sb3I6IF9hcmVhQ29sb3IsXG4gICAgICAgICAgICAgIGJvcmRlclJhZGl1czogaXRlbVN0eWxlLmJvcmRlclJhZGl1cyA/IGl0ZW1TdHlsZS5ib3JkZXJSYWRpdXMgOiAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LCB0cnVlKTtcbiAgICB9XG4gIH0sIFtteUNoYXJ0LCBkYXRhXSlcbiAgXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IGZhdWx0QnlIb3VyVGltZTogYW55O1xuICAgIGlmIChteUNoYXJ0ICYmIGlzU3dpdGNoICYmICFpc0hpZ2ggJiYgZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICBmYXVsdEJ5SG91clRpbWUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHNldEhpZ2hJbmRleChuID0+IHtcbiAgICAgICAgICBteUNoYXJ0LmRpc3BhdGNoQWN0aW9uKHtcbiAgICAgICAgICAgIHR5cGU6ICdzaG93VGlwJyxcbiAgICAgICAgICAgIHNlcmllc0luZGV4OiAwLFxuICAgICAgICAgICAgZGF0YUluZGV4OiBuXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKG4gPj0gZGF0YS5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG4gKyAxXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSwgc3dpdGNoVGltZSlcbiAgICB9XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoZmF1bHRCeUhvdXJUaW1lKVxuICAgIH1cbiAgfSwgW215Q2hhcnQsIGlzU3dpdGNoLCBpc0hpZ2gsIGRhdGFdKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiByZWY9e2NoYXJ0UmVmfVxuICAgICAgc3R5bGU9e3tcbiAgICAgICAgJ3dpZHRoJzogd2lkdGgsXG4gICAgICAgICdoZWlnaHQnOiBoZWlnaHRcbiAgICAgIH19PlxuICAgIDwvZGl2PlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IEVDaGFydHNCYXI7Il19