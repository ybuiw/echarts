import _objectSpread from "@babel/runtime/helpers/objectSpread2";
import _slicedToArray from "@babel/runtime/helpers/slicedToArray";
import React, { useEffect, useRef, useState } from 'react';
import * as echarts from 'echarts/core';
import { GridComponent, TooltipComponent } from 'echarts/components';
import { BarChart } from 'echarts/charts';
import { CanvasRenderer } from 'echarts/renderers';
echarts.use([GridComponent, TooltipComponent, BarChart, CanvasRenderer]);

var EChartsBar = function EChartsBar(props) {
  var _props$width = props.width,
      width = _props$width === void 0 ? '100%' : _props$width,
      _props$height = props.height,
      height = _props$height === void 0 ? '100%' : _props$height,
      _props$colors = props.colors,
      colors = _props$colors === void 0 ? ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4', '#ea7ccc'] : _props$colors,
      _props$isHorizontal = props.isHorizontal,
      isHorizontal = _props$isHorizontal === void 0 ? false : _props$isHorizontal,
      _props$color = props.color,
      color = _props$color === void 0 ? '#333' : _props$color,
      _props$lineColor = props.lineColor,
      lineColor = _props$lineColor === void 0 ? '#abb9d0' : _props$lineColor,
      _props$splitColor = props.splitColor,
      splitColor = _props$splitColor === void 0 ? '#e0e7f3' : _props$splitColor,
      _props$fontSize = props.fontSize,
      fontSize = _props$fontSize === void 0 ? 14 : _props$fontSize,
      _props$data = props.data,
      data = _props$data === void 0 ? [] : _props$data,
      _props$xAxis = props.xAxis,
      xAxis = _props$xAxis === void 0 ? {} : _props$xAxis,
      _props$yAxis = props.yAxis,
      yAxis = _props$yAxis === void 0 ? {} : _props$yAxis,
      _props$grid = props.grid,
      grid = _props$grid === void 0 ? {} : _props$grid,
      _props$areaStyle = props.areaStyle,
      areaStyle = _props$areaStyle === void 0 ? {} : _props$areaStyle,
      _props$itemStyle = props.itemStyle,
      itemStyle = _props$itemStyle === void 0 ? {} : _props$itemStyle,
      _props$isSwitch = props.isSwitch,
      isSwitch = _props$isSwitch === void 0 ? false : _props$isSwitch,
      _props$switchTime = props.switchTime,
      switchTime = _props$switchTime === void 0 ? 2000 : _props$switchTime,
      onClick = props.onClick;
  var chartRef = useRef(null);

  var _useState = useState(null),
      _useState2 = _slicedToArray(_useState, 2),
      myChart = _useState2[0],
      setMyChart = _useState2[1];

  var _useState3 = useState(false),
      _useState4 = _slicedToArray(_useState3, 1),
      isHigh = _useState4[0];

  var _useState5 = useState(0),
      _useState6 = _slicedToArray(_useState5, 2),
      highIndex = _useState6[0],
      setHighIndex = _useState6[1];

  useEffect(function () {
    var _myChart = echarts.init(chartRef.current);

    setMyChart(_myChart);
    window.addEventListener("resize", _myChart.resize, false);
    window.addEventListener('load', _myChart.resize, false);

    _myChart.off('click');

    _myChart.on('click', function (v) {
      onClick === null || onClick === void 0 ? void 0 : onClick(v.data);
      console.log(v.data);
    });

    return function () {
      console.log(2);
      window.removeEventListener('resize', _myChart.resize, false);
      window.removeEventListener('load', _myChart.resize, false);

      _myChart.dispose();
    };
  }, []);
  useEffect(function () {
    if (myChart) {
      myChart.clear();
      var _names = [];
      data.length > 0 && data.map(function (item) {
        _names.push(item.name);
      });

      var _grid = _objectSpread(_objectSpread({}, {
        top: '5%',
        bottom: '10%',
        left: '10%',
        right: '5%'
      }), grid);

      var _xAxis = {
        type: 'category',
        inverse: isHorizontal ? true : false,
        axisLabel: {
          color: xAxis.color ? xAxis.color : color,
          fontSize: xAxis.fontSize ? xAxis.fontSize : fontSize,
          rotate: xAxis.rotate ? xAxis.rotate : 0
        },
        axisLine: {
          show: xAxis.lineColor === false ? false : true,
          lineStyle: {
            color: xAxis.lineColor ? xAxis.lineColor : lineColor
          }
        },
        axisTick: {
          show: xAxis.isTick
        },
        splitLine: {
          show: xAxis.splitColor ? true : false,
          lineStyle: {
            color: xAxis.splitColor ? xAxis.splitColor : splitColor
          }
        },
        data: _names
      };
      var _yAxis = {
        name: yAxis.name,
        type: 'value',
        axisLabel: {
          color: yAxis.color ? yAxis.color : color,
          fontSize: yAxis.fontSize ? yAxis.fontSize : fontSize
        },
        axisLine: {
          show: yAxis.lineColor === false ? false : true,
          lineStyle: {
            color: yAxis.lineColor ? yAxis.lineColor : lineColor
          }
        },
        axisTick: {
          show: false
        },
        splitLine: {
          show: yAxis.splitColor === false ? false : true,
          lineStyle: {
            color: yAxis.splitColor ? yAxis.splitColor : splitColor
          }
        }
      };

      var _areaColor;

      if (areaStyle.isGrad) {
        if (Array.isArray(areaStyle.color) && areaStyle.color.length > 1) {
          _areaColor = {
            type: 'linear',
            x: 0,
            y: 0,
            x2: 0,
            y2: 1,
            colorStops: [{
              offset: 0,
              color: areaStyle.color[0]
            }, {
              offset: 1,
              color: areaStyle.color[1]
            }],
            global: false
          };
        } else {
          _areaColor = {
            type: 'linear',
            x: 0,
            y: 0,
            x2: 0,
            y2: 1,
            colorStops: [{
              offset: 0,
              color: colors[0]
            }, {
              offset: 1,
              color: 'rgba(255,255,255,0)'
            }],
            global: false
          };
        }
      }

      myChart.setOption({
        tooltip: {
          trigger: 'axis',
          transitionDuration: 0,
          enterable: true,
          axisPointer: {
            type: 'shadow'
          }
        },
        color: colors,
        grid: _grid,
        xAxis: isHorizontal ? _yAxis : _xAxis,
        yAxis: isHorizontal ? _xAxis : _yAxis,
        series: [{
          data: data,
          type: 'bar',
          barWidth: itemStyle.barWidth,
          itemStyle: {
            color: _areaColor,
            borderRadius: itemStyle.borderRadius ? itemStyle.borderRadius : 0
          }
        }]
      }, true);
    }
  }, [myChart, data]);
  useEffect(function () {
    var faultByHourTime;

    if (myChart && isSwitch && !isHigh && data.length > 0) {
      faultByHourTime = setInterval(function () {
        setHighIndex(function (n) {
          myChart.dispatchAction({
            type: 'showTip',
            seriesIndex: 0,
            dataIndex: n
          });

          if (n >= data.length - 1) {
            return 0;
          } else {
            return n + 1;
          }
        });
      }, switchTime);
    }

    return function () {
      clearInterval(faultByHourTime);
    };
  }, [myChart, isSwitch, isHigh, data]);
  return /*#__PURE__*/React.createElement("div", {
    ref: chartRef,
    style: {
      'width': width,
      'height': height
    }
  });
};

export default EChartsBar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleC50c3giXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsImVjaGFydHMiLCJHcmlkQ29tcG9uZW50IiwiVG9vbHRpcENvbXBvbmVudCIsIkJhckNoYXJ0IiwiQ2FudmFzUmVuZGVyZXIiLCJ1c2UiLCJFQ2hhcnRzQmFyIiwicHJvcHMiLCJ3aWR0aCIsImhlaWdodCIsImNvbG9ycyIsImlzSG9yaXpvbnRhbCIsImNvbG9yIiwibGluZUNvbG9yIiwic3BsaXRDb2xvciIsImZvbnRTaXplIiwiZGF0YSIsInhBeGlzIiwieUF4aXMiLCJncmlkIiwiYXJlYVN0eWxlIiwiaXRlbVN0eWxlIiwiaXNTd2l0Y2giLCJzd2l0Y2hUaW1lIiwib25DbGljayIsImNoYXJ0UmVmIiwibXlDaGFydCIsInNldE15Q2hhcnQiLCJpc0hpZ2giLCJoaWdoSW5kZXgiLCJzZXRIaWdoSW5kZXgiLCJfbXlDaGFydCIsImluaXQiLCJjdXJyZW50Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2l6ZSIsIm9mZiIsIm9uIiwidiIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGlzcG9zZSIsImNsZWFyIiwiX25hbWVzIiwibGVuZ3RoIiwibWFwIiwiaXRlbSIsInB1c2giLCJuYW1lIiwiX2dyaWQiLCJ0b3AiLCJib3R0b20iLCJsZWZ0IiwicmlnaHQiLCJfeEF4aXMiLCJ0eXBlIiwiaW52ZXJzZSIsImF4aXNMYWJlbCIsInJvdGF0ZSIsImF4aXNMaW5lIiwic2hvdyIsImxpbmVTdHlsZSIsImF4aXNUaWNrIiwiaXNUaWNrIiwic3BsaXRMaW5lIiwiX3lBeGlzIiwiX2FyZWFDb2xvciIsImlzR3JhZCIsIkFycmF5IiwiaXNBcnJheSIsIngiLCJ5IiwieDIiLCJ5MiIsImNvbG9yU3RvcHMiLCJvZmZzZXQiLCJnbG9iYWwiLCJzZXRPcHRpb24iLCJ0b29sdGlwIiwidHJpZ2dlciIsInRyYW5zaXRpb25EdXJhdGlvbiIsImVudGVyYWJsZSIsImF4aXNQb2ludGVyIiwic2VyaWVzIiwiYmFyV2lkdGgiLCJib3JkZXJSYWRpdXMiLCJmYXVsdEJ5SG91clRpbWUiLCJzZXRJbnRlcnZhbCIsIm4iLCJkaXNwYXRjaEFjdGlvbiIsInNlcmllc0luZGV4IiwiZGF0YUluZGV4IiwiY2xlYXJJbnRlcnZhbCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxPQUFPQSxLQUFQLElBQWdCQyxTQUFoQixFQUEyQkMsTUFBM0IsRUFBbUNDLFFBQW5DLFFBQW1ELE9BQW5EO0FBRUEsT0FBTyxLQUFLQyxPQUFaLE1BQXlCLGNBQXpCO0FBQ0EsU0FBU0MsYUFBVCxFQUF3QkMsZ0JBQXhCLFFBQXFFLG9CQUFyRTtBQUNBLFNBQVNDLFFBQVQsUUFBeUIsZ0JBQXpCO0FBQ0EsU0FBU0MsY0FBVCxRQUErQixtQkFBL0I7QUFFQUosT0FBTyxDQUFDSyxHQUFSLENBQ0UsQ0FBQ0osYUFBRCxFQUFnQkMsZ0JBQWhCLEVBQWtDQyxRQUFsQyxFQUE0Q0MsY0FBNUMsQ0FERjs7QUErRUEsSUFBTUUsVUFBVSxHQUFHLFNBQWJBLFVBQWEsQ0FBQ0MsS0FBRCxFQUF5QjtBQUMxQyxxQkFrQklBLEtBbEJKLENBQ0VDLEtBREY7QUFBQSxNQUNFQSxLQURGLDZCQUNVLE1BRFY7QUFBQSxzQkFrQklELEtBbEJKLENBRUVFLE1BRkY7QUFBQSxNQUVFQSxNQUZGLDhCQUVXLE1BRlg7QUFBQSxzQkFrQklGLEtBbEJKLENBR0VHLE1BSEY7QUFBQSxNQUdFQSxNQUhGLDhCQUdXLENBQUMsU0FBRCxFQUFZLFNBQVosRUFBdUIsU0FBdkIsRUFBa0MsU0FBbEMsRUFBNkMsU0FBN0MsRUFBd0QsU0FBeEQsRUFBbUUsU0FBbkUsRUFBOEUsU0FBOUUsRUFBeUYsU0FBekYsQ0FIWDtBQUFBLDRCQWtCSUgsS0FsQkosQ0FJRUksWUFKRjtBQUFBLE1BSUVBLFlBSkYsb0NBSWlCLEtBSmpCO0FBQUEscUJBa0JJSixLQWxCSixDQUtFSyxLQUxGO0FBQUEsTUFLRUEs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OlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0ICogYXMgZWNoYXJ0cyBmcm9tICdlY2hhcnRzL2NvcmUnO1xuaW1wb3J0IHsgR3JpZENvbXBvbmVudCwgVG9vbHRpcENvbXBvbmVudCwgR3JpZENvbXBvbmVudE9wdGlvbiB9IGZyb20gJ2VjaGFydHMvY29tcG9uZW50cyc7XG5pbXBvcnQgeyBCYXJDaGFydCB9IGZyb20gJ2VjaGFydHMvY2hhcnRzJztcbmltcG9ydCB7IENhbnZhc1JlbmRlcmVyIH0gZnJvbSAnZWNoYXJ0cy9yZW5kZXJlcnMnO1xuXG5lY2hhcnRzLnVzZShcbiAgW0dyaWRDb21wb25lbnQsIFRvb2x0aXBDb21wb25lbnQsIEJhckNoYXJ0LCBDYW52YXNSZW5kZXJlcl1cbik7XG5cbmludGVyZmFjZSB4QXhpc1Byb3BzIHtcbiAgY29sb3I/OiBzdHJpbmc7XG4gIGZvbnRTaXplPzogbnVtYmVyO1xuICBsaW5lQ29sb3I/OiBzdHJpbmcgfCBib29sZWFuO1xuICBzcGxpdENvbG9yPzogc3RyaW5nIHwgYm9vbGVhbjtcbiAgcm90YXRlPzogbnVtYmVyO1xuICBpc1RpY2s/OiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgeUF4aXNQcm9wcyB7XG4gIG5hbWU/OiBzdHJpbmc7XG4gIGNvbG9yPzogc3RyaW5nO1xuICBmb250U2l6ZT86IG51bWJlcjtcbiAgbGluZUNvbG9yPzogc3RyaW5nIHwgYm9vbGVhbjtcbiAgc3BsaXRDb2xvcj86IHN0cmluZyB8IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBhcmVhU3R5bGVQcm9wcyB7XG4gIHNob3c/OiBib29sZWFuO1xuICBpc0dyYWQ/OiBib29sZWFuO1xuICBjb2xvcj86IHN0cmluZ1tdXG59XG5cbmludGVyZmFjZSBpdGVtU3R5bGVQcm9wcyB7XG4gIGJhcldpZHRoPzogbnVtYmVyO1xuICBib3JkZXJSYWRpdXM/OiBudW1iZXJbXTtcbn1cblxuaW50ZXJmYWNlIEJhckJhc2VQcm9wcyB7XG4gIGRhdGE/OiBhbnlbXTtcbiAgd2lkdGg/OiBzdHJpbmc7XG4gIGhlaWdodD86IHN0cmluZztcbiAgLyoqIOaYr+WQpuaoquaOkiAqL1xuICBpc0hvcml6b250YWw/OiBib29sZWFuO1xuICAvKiog5a2X5L2T6aKc6ImyICovXG4gIGNvbG9yPzogc3RyaW5nO1xuICAvKiogeCwgeei9tOi9tOe6v+e6v+adoeminOiJsiAqL1xuICBsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIC8qKiB4LCB56L20572R5qC857q/5p2h6aKc6ImyICovXG4gIHNwbGl0Q29sb3I/OiBzdHJpbmc7XG4gIC8qKiDlrZfkvZPlpKflsI/vvIzpu5jorqQxNOWDj+e0oCAqL1xuICBmb250U2l6ZT86IG51bWJlciB8IHN0cmluZztcbiAgLyoqIOafseeKtuWbvuminOiJsiAqL1xuICBjb2xvcnM/OiBzdHJpbmdbXTtcbiAgLyoqIOaYr+WQpuiHquWKqOWIh+aNoiBUb29sdGlwICovXG4gIGlzU3dpdGNoPzogYm9vbGVhbjtcbiAgLyoqIOiHquWKqOWIh+aNouS6i+S7tiDpu5jorqQgMjAwMO+8iDJT77yJICovXG4gIHN3aXRjaFRpbWU/OiBudW1iZXI7XG4gIC8qKiDmn7Hnirblm77loavlhYXmoLflvI8gKi9cbiAgYXJlYVN0eWxlPzogYXJlYVN0eWxlUHJvcHM7XG4gIC8qKiDmn7Hnirblm77moLflvI8gKi9cbiAgaXRlbVN0eWxlPzogaXRlbVN0eWxlUHJvcHM7XG4gIC8qKlxuICAgKiBYIOi9tOmFjee9rlxuICAgKiBAY29sb3Ig5paH5a2X6aKc6ImyXG4gICAqIEBzaXplIOaWh+Wtl+Wkp+Wwj1xuICAgKiBAbGluZUNvbG9yIHjovbTovbTnur/nur/mnaHpopzoibIsIGZhbHNlIOWImeS4jeaYvuekulxuICAgKiBAc3BsaXRDb2xvciB46L20572R5qC857q/5p2h6aKc6ImyLCBmYWxzZSDliJnkuI3mmL7npLosIOm7mOiupHRydWVcbiAgICogQHJvdGF0ZSDliLvluqbmoIfnrb7ml4vovazop5LluqZcbiAgICogQGlzVGljayDmmK/lkKbmmL7npLrlnZDmoIfovbTliLvluqZcbiAgICovXG4gIHhBeGlzPzogeEF4aXNQcm9wcztcbiAgLyoqXG4gICAqIHkg6L206YWN572uXG4gICAqIEBuYW1lIOWdkOagh+i9tOWQjeensFxuICAgKiBAY29sb3Ig5paH5a2X6aKc6ImyXG4gICAqIEBzaXplIOaWh+Wtl+Wkp+Wwj1xuICAgKiBAbGluZUNvbG9yIHnovbTovbTnur/nur/mnaHpopzoibIsIGZhbHNlIOWImeS4jeaYvuekulxuICAgKiBAc3BsaXRDb2xvciB56L20572R5qC857q/5p2h6aKc6ImyLCBmYWxzZSDliJnkuI3mmL7npLosIOm7mOiupGZhbHNlXG4gICAqL1xuICB5QXhpcz86IHlBeGlzUHJvcHM7XG4gIGdyaWQ/OiBHcmlkQ29tcG9uZW50T3B0aW9uO1xuICBvbkNsaWNrPzogKHY6IGFueSkgPT4gdm9pZDtcbn1cblxuY29uc3QgRUNoYXJ0c0JhciA9IChwcm9wczogQmFyQmFzZVByb3BzKSA9PiB7XG4gIGNvbnN0IHtcbiAgICB3aWR0aCA9ICcxMDAlJyxcbiAgICBoZWlnaHQgPSAnMTAwJScsXG4gICAgY29sb3JzID0gWycjNTQ3MGM2JywgJyM5MWNjNzUnLCAnI2ZhYzg1OCcsICcjZWU2NjY2JywgJyM3M2MwZGUnLCAnIzNiYTI3MicsICcjZmM4NDUyJywgJyM5YTYwYjQnLCAnI2VhN2NjYyddLFxuICAgIGlzSG9yaXpvbnRhbCA9IGZhbHNlLFxuICAgIGNvbG9yID0gJyMzMzMnLFxuICAgIGxpbmVDb2xvciA9ICcjYWJiOWQwJyxcbiAgICBzcGxpdENvbG9yID0gJyNlMGU3ZjMnLFxuICAgIGZvbnRTaXplID0gMTQsXG4gICAgZGF0YSA9IFtdLFxuICAgIHhBeGlzID0ge30sXG4gICAgeUF4aXMgPSB7fSxcbiAgICBncmlkID0ge30sXG4gICAgYXJlYVN0eWxlID0ge30sXG4gICAgaXRlbVN0eWxlID0ge30sXG4gICAgaXNTd2l0Y2ggPSBmYWxzZSxcbiAgICBzd2l0Y2hUaW1lID0gMjAwMCxcbiAgICBvbkNsaWNrXG4gIH0gPSBwcm9wcztcblxuICBjb25zdCBjaGFydFJlZiA9IHVzZVJlZjxhbnk+KG51bGwpXG4gIGNvbnN0IFtteUNoYXJ0LCBzZXRNeUNoYXJ0XSA9IHVzZVN0YXRlPGFueT4obnVsbCk7XG4gIGNvbnN0IFtpc0hpZ2hdID0gdXNlU3RhdGU8Ym9vbGVhbj4oZmFsc2UpO1xuICBjb25zdCBbaGlnaEluZGV4LCBzZXRIaWdoSW5kZXhdID0gdXNlU3RhdGU8bnVtYmVyPigwKTtcbiAgXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgX215Q2hhcnQ6IGFueSA9IGVjaGFydHMuaW5pdChjaGFydFJlZi5jdXJyZW50KTtcbiAgICBzZXRNeUNoYXJ0KF9teUNoYXJ0KVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgX215Q2hhcnQucmVzaXplLCBmYWxzZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBfbXlDaGFydC5yZXNpemUsIGZhbHNlKTtcbiAgICBfbXlDaGFydC5vZmYoJ2NsaWNrJyk7XG4gICAgX215Q2hhcnQub24oJ2NsaWNrJywgKHY6IGFueSkgPT4ge1xuICAgICAgb25DbGljaz8uKHYuZGF0YSk7XG4gICAgICBjb25zb2xlLmxvZyh2LmRhdGEpXG4gICAgfSlcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coMilcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBfbXlDaGFydC5yZXNpemUsIGZhbHNlKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgX215Q2hhcnQucmVzaXplLCBmYWxzZSk7XG4gICAgICBfbXlDaGFydC5kaXNwb3NlKCk7XG4gICAgfVxuICB9LCBbXSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChteUNoYXJ0KSB7XG4gICAgICBteUNoYXJ0LmNsZWFyKCk7XG4gICAgICBjb25zdCBfbmFtZXM6IHN0cmluZ1tdID0gW107XG4gICAgICBkYXRhLmxlbmd0aCA+IDAgJiYgZGF0YS5tYXAoKGl0ZW06IGFueSkgPT4ge1xuICAgICAgICBfbmFtZXMucHVzaChpdGVtLm5hbWUpO1xuICAgICAgfSlcbiAgICAgIGNvbnN0IF9ncmlkOiBHcmlkQ29tcG9uZW50T3B0aW9uID0gey4uLntcbiAgICAgICAgdG9wOiAnNSUnLFxuICAgICAgICBib3R0b206ICcxMCUnLFxuICAgICAgICBsZWZ0OiAnMTAlJyxcbiAgICAgICAgcmlnaHQ6ICc1JScsXG4gICAgICB9LCAuLi5ncmlkfTtcbiAgICAgIGNvbnN0IF94QXhpczogYW55ID0ge1xuICAgICAgICB0eXBlOiAnY2F0ZWdvcnknLFxuICAgICAgICBpbnZlcnNlOiBpc0hvcml6b250YWwgPyB0cnVlIDogZmFsc2UsXG4gICAgICAgIGF4aXNMYWJlbDoge1xuICAgICAgICAgIGNvbG9yOiB4QXhpcy5jb2xvciA/IHhBeGlzLmNvbG9yIDogY29sb3IsXG4gICAgICAgICAgZm9udFNpemU6IHhBeGlzLmZvbnRTaXplID8geEF4aXMuZm9udFNpemUgOiBmb250U2l6ZSxcbiAgICAgICAgICByb3RhdGU6IHhBeGlzLnJvdGF0ZSA/IHhBeGlzLnJvdGF0ZSA6IDAsXG4gICAgICAgIH0sXG4gICAgICAgIGF4aXNMaW5lOiB7XG4gICAgICAgICAgc2hvdzogeEF4aXMubGluZUNvbG9yID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZSxcbiAgICAgICAgICBsaW5lU3R5bGU6IHtcbiAgICAgICAgICAgIGNvbG9yOiB4QXhpcy5saW5lQ29sb3IgPyB4QXhpcy5saW5lQ29sb3IgOiBsaW5lQ29sb3IsXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBheGlzVGljazoge1xuICAgICAgICAgIHNob3c6IHhBeGlzLmlzVGljayxcbiAgICAgICAgfSxcbiAgICAgICAgc3BsaXRMaW5lOiB7XG4gICAgICAgICAgc2hvdzogeEF4aXMuc3BsaXRDb2xvciA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICBsaW5lU3R5bGU6IHtcbiAgICAgICAgICAgIGNvbG9yOiB4QXhpcy5zcGxpdENvbG9yID8geEF4aXMuc3BsaXRDb2xvciA6IHNwbGl0Q29sb3IsXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBfbmFtZXNcbiAgICAgIH1cbiAgICAgIGNvbnN0IF95QXhpczogYW55ID0ge1xuICAgICAgICBuYW1lOiB5QXhpcy5uYW1lLFxuICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICBheGlzTGFiZWw6IHtcbiAgICAgICAgICBjb2xvcjogeUF4aXMuY29sb3IgPyB5QXhpcy5jb2xvciA6IGNvbG9yLFxuICAgICAgICAgIGZvbnRTaXplOiB5QXhpcy5mb250U2l6ZSA/IHlBeGlzLmZvbnRTaXplIDogZm9udFNpemUsXG4gICAgICAgIH0sXG4gICAgICAgIGF4aXNMaW5lOiB7XG4gICAgICAgICAgc2hvdzogeUF4aXMubGluZUNvbG9yID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZSxcbiAgICAgICAgICBsaW5lU3R5bGU6IHtcbiAgICAgICAgICAgIGNvbG9yOiB5QXhpcy5saW5lQ29sb3IgPyB5QXhpcy5saW5lQ29sb3IgOiBsaW5lQ29sb3IsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgYXhpc1RpY2s6IHtcbiAgICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgc3BsaXRMaW5lOiB7XG4gICAgICAgICAgc2hvdzogeUF4aXMuc3BsaXRDb2xvciA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgbGluZVN0eWxlOiB7XG4gICAgICAgICAgICBjb2xvcjogeUF4aXMuc3BsaXRDb2xvciA/IHlBeGlzLnNwbGl0Q29sb3IgOiBzcGxpdENvbG9yLFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICAgIGxldCBfYXJlYUNvbG9yOiBhbnk7XG4gICAgICBpZiAoYXJlYVN0eWxlLmlzR3JhZCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmVhU3R5bGUuY29sb3IpICYmIGFyZWFTdHlsZS5jb2xvci5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgX2FyZWFDb2xvciA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdsaW5lYXInLFxuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICB4MjogMCxcbiAgICAgICAgICAgIHkyOiAxLFxuICAgICAgICAgICAgY29sb3JTdG9wczogW3tcbiAgICAgICAgICAgICAgb2Zmc2V0OiAwLCBjb2xvcjogYXJlYVN0eWxlLmNvbG9yWzBdXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgb2Zmc2V0OiAxLCBjb2xvcjogYXJlYVN0eWxlLmNvbG9yWzFdXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGdsb2JhbDogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX2FyZWFDb2xvciA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdsaW5lYXInLFxuICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICB4MjogMCxcbiAgICAgICAgICAgIHkyOiAxLFxuICAgICAgICAgICAgY29sb3JTdG9wczogW3tcbiAgICAgICAgICAgICAgb2Zmc2V0OiAwLCBjb2xvcjogY29sb3JzWzBdXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgIG9mZnNldDogMSwgY29sb3I6ICdyZ2JhKDI1NSwyNTUsMjU1LDApJ1xuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBnbG9iYWw6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBteUNoYXJ0LnNldE9wdGlvbih7XG4gICAgICAgIHRvb2x0aXA6IHtcbiAgICAgICAgICB0cmlnZ2VyOiAnYXhpcycsXG4gICAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiAwLFxuICAgICAgICAgIGVudGVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBheGlzUG9pbnRlcjoge1xuICAgICAgICAgICAgdHlwZTogJ3NoYWRvdydcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGNvbG9yOiBjb2xvcnMsXG4gICAgICAgIGdyaWQ6IF9ncmlkLFxuICAgICAgICB4QXhpczogaXNIb3Jpem9udGFsID8gX3lBeGlzIDogX3hBeGlzLFxuICAgICAgICB5QXhpczogaXNIb3Jpem9udGFsID8gX3hBeGlzIDogX3lBeGlzLFxuICAgICAgICBzZXJpZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgdHlwZTogJ2JhcicsXG4gICAgICAgICAgICBiYXJXaWR0aDogaXRlbVN0eWxlLmJhcldpZHRoLFxuICAgICAgICAgICAgaXRlbVN0eWxlOiB7XG4gICAgICAgICAgICAgIGNvbG9yOiBfYXJlYUNvbG9yLFxuICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IGl0ZW1TdHlsZS5ib3JkZXJSYWRpdXMgPyBpdGVtU3R5bGUuYm9yZGVyUmFkaXVzIDogMFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSwgdHJ1ZSk7XG4gICAgfVxuICB9LCBbbXlDaGFydCwgZGF0YV0pXG4gIFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBmYXVsdEJ5SG91clRpbWU6IGFueTtcbiAgICBpZiAobXlDaGFydCAmJiBpc1N3aXRjaCAmJiAhaXNIaWdoICYmIGRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgZmF1bHRCeUhvdXJUaW1lID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBzZXRIaWdoSW5kZXgobiA9PiB7XG4gICAgICAgICAgbXlDaGFydC5kaXNwYXRjaEFjdGlvbih7XG4gICAgICAgICAgICB0eXBlOiAnc2hvd1RpcCcsXG4gICAgICAgICAgICBzZXJpZXNJbmRleDogMCxcbiAgICAgICAgICAgIGRhdGFJbmRleDogblxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChuID49IGRhdGEubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuICsgMVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0sIHN3aXRjaFRpbWUpXG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjbGVhckludGVydmFsKGZhdWx0QnlIb3VyVGltZSlcbiAgICB9XG4gIH0sIFtteUNoYXJ0LCBpc1N3aXRjaCwgaXNIaWdoLCBkYXRhXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgcmVmPXtjaGFydFJlZn1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgICd3aWR0aCc6IHdpZHRoLFxuICAgICAgICAnaGVpZ2h0JzogaGVpZ2h0XG4gICAgICB9fT5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBFQ2hhcnRzQmFyOyJdfQ==