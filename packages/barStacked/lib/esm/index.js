import _objectSpread from "@babel/runtime/helpers/objectSpread2";
import _slicedToArray from "@babel/runtime/helpers/slicedToArray";
import React, { useEffect, useRef, useState } from 'react';
import * as echarts from 'echarts/core';
import { GridComponent, TooltipComponent, LegendComponent } from 'echarts/components';
import { BarChart } from 'echarts/charts';
import { CanvasRenderer } from 'echarts/renderers';
echarts.use([GridComponent, TooltipComponent, LegendComponent, BarChart, CanvasRenderer]);

var EChartsBar = function EChartsBar(props) {
  var _props$width = props.width,
      width = _props$width === void 0 ? '100%' : _props$width,
      _props$height = props.height,
      height = _props$height === void 0 ? '100%' : _props$height,
      _props$isHorizontal = props.isHorizontal,
      isHorizontal = _props$isHorizontal === void 0 ? false : _props$isHorizontal,
      _props$colors = props.colors,
      colors = _props$colors === void 0 ? ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4', '#ea7ccc'] : _props$colors,
      _props$color = props.color,
      color = _props$color === void 0 ? '#333' : _props$color,
      _props$lineColor = props.lineColor,
      lineColor = _props$lineColor === void 0 ? '#abb9d0' : _props$lineColor,
      _props$splitColor = props.splitColor,
      splitColor = _props$splitColor === void 0 ? '#e0e7f3' : _props$splitColor,
      _props$fontSize = props.fontSize,
      fontSize = _props$fontSize === void 0 ? 14 : _props$fontSize,
      _props$legend = props.legend,
      legend = _props$legend === void 0 ? {} : _props$legend,
      _props$data = props.data,
      data = _props$data === void 0 ? [] : _props$data,
      _props$xAxis = props.xAxis,
      xAxis = _props$xAxis === void 0 ? {} : _props$xAxis,
      _props$yAxis = props.yAxis,
      yAxis = _props$yAxis === void 0 ? {} : _props$yAxis,
      _props$grid = props.grid,
      grid = _props$grid === void 0 ? {} : _props$grid,
      _props$itemStyle = props.itemStyle,
      itemStyle = _props$itemStyle === void 0 ? {} : _props$itemStyle,
      _props$isSwitch = props.isSwitch,
      isSwitch = _props$isSwitch === void 0 ? false : _props$isSwitch,
      _props$switchTime = props.switchTime,
      switchTime = _props$switchTime === void 0 ? 2000 : _props$switchTime,
      onClick = props.onClick;
  var chartRef = useRef(null);

  var _useState = useState(null),
      _useState2 = _slicedToArray(_useState, 2),
      myChart = _useState2[0],
      setMyChart = _useState2[1];

  var _useState3 = useState(false),
      _useState4 = _slicedToArray(_useState3, 1),
      isHigh = _useState4[0];

  var _useState5 = useState(0),
      _useState6 = _slicedToArray(_useState5, 2),
      highIndex = _useState6[0],
      setHighIndex = _useState6[1];

  useEffect(function () {
    var _myChart = echarts.init(chartRef.current);

    setMyChart(_myChart);
    window.addEventListener("resize", _myChart.resize, false);
    window.addEventListener('load', _myChart.resize, false);

    _myChart.off('click');

    _myChart.on('click', function (v) {
      onClick === null || onClick === void 0 ? void 0 : onClick(v.data);
    });

    return function () {
      window.removeEventListener('resize', _myChart.resize, false);
      window.removeEventListener('load', _myChart.resize, false);

      _myChart.dispose();
    };
  }, []);
  useEffect(function () {
    if (myChart) {
      myChart.clear();
      var _names = [];
      var _series = [];
      var _seriesName = [];

      if (data.length > 0) {
        data.map(function (item, index) {
          var _value = [];

          _names.push(item.name);

          if (index === 0) {
            item.child.map(function (item2) {
              _seriesName.push(item2.name);
            });
          }
        });

        _seriesName.map(function (item, index) {
          var _v = [];
          data.map(function (item2) {
            _v.push(item2.child[index]);
          });

          _series.push({
            name: item,
            stack: itemStyle.isStack ? 'stack' : undefined,
            type: 'bar',
            barWidth: itemStyle.barWidth,
            itemStyle: {
              borderRadius: itemStyle.borderRadius ? itemStyle.borderRadius : 0
            },
            data: _v
          });
        });
      }

      var _grid = _objectSpread(_objectSpread({}, {
        top: '15%',
        bottom: '10%',
        left: '10%',
        right: '5%'
      }), grid);

      var _legend = _objectSpread(_objectSpread({}, {
        show: true,
        icon: 'circle',
        data: _seriesName
      }), legend);

      var _xAxis = {
        type: 'category',
        axisLabel: {
          color: xAxis.color ? xAxis.color : color,
          fontSize: xAxis.fontSize ? xAxis.fontSize : fontSize,
          rotate: xAxis.rotate ? xAxis.rotate : 0
        },
        axisLine: {
          show: xAxis.lineColor === false ? false : true,
          lineStyle: {
            color: xAxis.lineColor ? xAxis.lineColor : lineColor
          }
        },
        axisTick: {
          show: xAxis.isTick
        },
        splitLine: {
          show: xAxis.splitColor ? true : false,
          lineStyle: {
            color: xAxis.splitColor ? xAxis.splitColor : splitColor
          }
        },
        data: _names
      };
      var _yAxis = {
        name: yAxis.name,
        type: 'value',
        axisLabel: {
          color: yAxis.color ? yAxis.color : color,
          fontSize: yAxis.fontSize ? yAxis.fontSize : fontSize
        },
        axisLine: {
          show: yAxis.lineColor === false ? false : true,
          lineStyle: {
            color: yAxis.lineColor ? yAxis.lineColor : lineColor
          }
        },
        axisTick: {
          show: false
        },
        splitLine: {
          show: yAxis.splitColor === false ? false : true,
          lineStyle: {
            color: yAxis.splitColor ? yAxis.splitColor : splitColor
          }
        }
      };
      myChart.setOption({
        tooltip: {
          trigger: 'axis',
          transitionDuration: 0,
          enterable: true,
          axisPointer: {
            type: 'shadow'
          }
        },
        color: colors,
        grid: _grid,
        legend: _legend,
        xAxis: isHorizontal ? _yAxis : _xAxis,
        yAxis: isHorizontal ? _xAxis : _yAxis,
        series: _series
      }, true);
    }
  }, [myChart, data]);
  useEffect(function () {
    var faultByHourTime;

    if (myChart && isSwitch && !isHigh && data.length > 0) {
      faultByHourTime = setInterval(function () {
        setHighIndex(function (n) {
          myChart.dispatchAction({
            type: 'showTip',
            seriesIndex: 0,
            dataIndex: n
          });

          if (n >= data.length - 1) {
            return 0;
          } else {
            return n + 1;
          }
        });
      }, switchTime);
    }

    return function () {
      clearInterval(faultByHourTime);
    };
  }, [myChart, isSwitch, isHigh, data]);
  return /*#__PURE__*/React.createElement("div", {
    ref: chartRef,
    style: {
      'width': width,
      'height': height
    }
  });
};

export default EChartsBar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleC50c3giXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsImVjaGFydHMiLCJHcmlkQ29tcG9uZW50IiwiVG9vbHRpcENvbXBvbmVudCIsIkxlZ2VuZENvbXBvbmVudCIsIkJhckNoYXJ0IiwiQ2FudmFzUmVuZGVyZXIiLCJ1c2UiLCJFQ2hhcnRzQmFyIiwicHJvcHMiLCJ3aWR0aCIsImhlaWdodCIsImlzSG9yaXpvbnRhbCIsImNvbG9ycyIsImNvbG9yIiwibGluZUNvbG9yIiwic3BsaXRDb2xvciIsImZvbnRTaXplIiwibGVnZW5kIiwiZGF0YSIsInhBeGlzIiwieUF4aXMiLCJncmlkIiwiaXRlbVN0eWxlIiwiaXNTd2l0Y2giLCJzd2l0Y2hUaW1lIiwib25DbGljayIsImNoYXJ0UmVmIiwibXlDaGFydCIsInNldE15Q2hhcnQiLCJpc0hpZ2giLCJoaWdoSW5kZXgiLCJzZXRIaWdoSW5kZXgiLCJfbXlDaGFydCIsImluaXQiLCJjdXJyZW50Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2l6ZSIsIm9mZiIsIm9uIiwidiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwb3NlIiwiY2xlYXIiLCJfbmFtZXMiLCJfc2VyaWVzIiwiX3Nlcmllc05hbWUiLCJsZW5ndGgiLCJtYXAiLCJpdGVtIiwiaW5kZXgiLCJfdmFsdWUiLCJwdXNoIiwibmFtZSIsImNoaWxkIiwiaXRlbTIiLCJfdiIsInN0YWNrIiwiaXNTdGFjayIsInVuZGVmaW5lZCIsInR5cGUiLCJiYXJXaWR0aCIsImJvcmRlclJhZGl1cyIsIl9ncmlkIiwidG9wIiwiYm90dG9tIiwibGVmdCIsInJpZ2h0IiwiX2xlZ2VuZCIsInNob3ciLCJpY29uIiwiX3hBeGlzIiwiYXhpc0xhYmVsIiwicm90YXRlIiwiYXhpc0xpbmUiLCJsaW5lU3R5bGUiLCJheGlzVGljayIsImlzVGljayIsInNwbGl0TGluZSIsIl95QXhpcyIsInNldE9wdGlvbiIsInRvb2x0aXAiLCJ0cmlnZ2VyIiwidHJhbnNpdGlvbkR1cmF0aW9uIiwiZW50ZXJhYmxlIiwiYXhpc1BvaW50ZXIiLCJzZXJpZXMiLCJmYXVsdEJ5SG91clRpbWUiLCJzZXRJbnRlcnZhbCIsIm4iLCJkaXNwYXRjaEFjdGlvbiIsInNlcmllc0luZGV4IiwiZGF0YUluZGV4IiwiY2xlYXJJbnRlcnZhbCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxPQUFPQSxLQUFQLElBQWdCQyxTQUFoQixFQUEyQkMsTUFBM0IsRUFBbUNDLFFBQW5DLFFBQW1ELE9BQW5EO0FBRUEsT0FBTyxLQUFLQyxPQUFaLE1BQXlCLGNBQXpCO0FBQ0EsU0FBU0MsYUFBVCxFQUF3QkMsZ0JBQXhCLEVBQTBDQyxlQUExQyxRQUE2RyxvQkFBN0c7QUFDQSxTQUFTQyxRQUFULFFBQXlCLGdCQUF6QjtBQUNBLFNBQVNDLGNBQVQsUUFBK0IsbUJBQS9CO0FBRUFMLE9BQU8sQ0FBQ00sR0FBUixDQUNFLENBQUNMLGFBQUQsRUFBZ0JDLGdCQUFoQixFQUFrQ0MsZUFBbEMsRUFBbURDLFFBQW5ELEVBQTZEQyxjQUE3RCxDQURGOztBQTBFQSxJQUFNRSxVQUFVLEdBQUcsU0FBYkEsVUFBYSxDQUFDQyxLQUFELEVBQTRCO0FBQzdDLHFCQWtCSUEsS0FsQkosQ0FDRUMsS0FERjtBQUFBLE1BQ0VBLEtBREYsNkJBQ1UsTUFEVjtBQUFBLHNCQWtCSUQsS0FsQkosQ0FFRUUsTUFGRjtBQUFBLE1BRUVBLE1BRkYsOEJBRVcsTUFGWDtBQUFBLDRCQWtCSUYsS0FsQkosQ0FHRUcsWUFIRjtBQUFBLE1BR0VBLFlBSEYsb0NBR2lCLEtBSGpCO0FBQUEsc0JBa0JJSCxLQWxCSixDQUlFSSxNQUpGO0FBQUEsTUFJRUEsTUFKRiw4QkFJVyxDQUFDLFNBQUQsRUFBWSxTQUFaLEVBQXVCLFNBQXZCLEVBQWtDLFNBQWxDLEVBQTZDLFNBQTdDLEVBQXdELFNBQXhELEVBQW1FLFNBQW5FLEVBQThFLFNBQTlFLEVBQXlGLFNBQXpGLENBSlg7QUFBQSxx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O0FBQ2hCOUQsVUFBQUEsT0FBTyxDQUFDK0QsY0FBUixDQUF1QjtBQUNyQjlCLFlBQUFBLElBQUksRUFBRSxTQURlO0FBRXJCK0IsWUFBQUEsV0FBVyxFQUFFLENBRlE7QUFHckJDLFlBQUFBLFNBQVMsRUFBRUg7QUFIVSxXQUF2Qjs7QUFLQSxjQUFJQSxDQUFDLElBQUl2RSxJQUFJLENBQUM2QixNQUFMLEdBQWMsQ0FBdkIsRUFBMEI7QUFDeEIsbUJBQU8sQ0FBUDtBQUNELFdBRkQsTUFFTztBQUNMLG1CQUFPMEMsQ0FBQyxHQUFHLENBQVg7QUFDRDtBQUNGLFNBWFcsQ0FBWjtBQVlELE9BYjRCLEVBYTFCakUsVUFiMEIsQ0FBN0I7QUFjRDs7QUFDRCxXQUFPLFlBQU07QUFDWHFFLE1BQUFBLGFBQWEsQ0FBQ04sZUFBRCxDQUFiO0FBQ0QsS0FGRDtBQUdELEdBckJRLEVBcUJOLENBQUM1RCxPQUFELEVBQVVKLFFBQVYsRUFBb0JNLE1BQXBCLEVBQTRCWCxJQUE1QixDQXJCTSxDQUFUO0FBdUJBLHNCQUNFO0FBQUssSUFBQSxHQUFHLEVBQUVRLFFBQVY7QUFDRSxJQUFBLEtBQUssRUFBRTtBQUNMLGVBQVNqQixLQURKO0FBRUwsZ0JBQVVDO0FBRkw7QUFEVCxJQURGO0FBUUQsQ0ExTEQ7O0FBNExBLGVBQWVILFVBQWYiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgKiBhcyBlY2hhcnRzIGZyb20gJ2VjaGFydHMvY29yZSc7XG5pbXBvcnQgeyBHcmlkQ29tcG9uZW50LCBUb29sdGlwQ29tcG9uZW50LCBMZWdlbmRDb21wb25lbnQsIEdyaWRDb21wb25lbnRPcHRpb24sIExlZ2VuZENvbXBvbmVudE9wdGlvbiB9IGZyb20gJ2VjaGFydHMvY29tcG9uZW50cyc7XG5pbXBvcnQgeyBCYXJDaGFydCB9IGZyb20gJ2VjaGFydHMvY2hhcnRzJztcbmltcG9ydCB7IENhbnZhc1JlbmRlcmVyIH0gZnJvbSAnZWNoYXJ0cy9yZW5kZXJlcnMnO1xuXG5lY2hhcnRzLnVzZShcbiAgW0dyaWRDb21wb25lbnQsIFRvb2x0aXBDb21wb25lbnQsIExlZ2VuZENvbXBvbmVudCwgQmFyQ2hhcnQsIENhbnZhc1JlbmRlcmVyXVxuKTtcblxuaW50ZXJmYWNlIHhBeGlzUHJvcHMge1xuICBjb2xvcj86IHN0cmluZztcbiAgZm9udFNpemU/OiBudW1iZXI7XG4gIGxpbmVDb2xvcj86IHN0cmluZyB8IGJvb2xlYW47XG4gIHNwbGl0Q29sb3I/OiBzdHJpbmcgfCBib29sZWFuO1xuICByb3RhdGU/OiBudW1iZXI7XG4gIGlzVGljaz86IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSB5QXhpc1Byb3BzIHtcbiAgbmFtZT86IHN0cmluZztcbiAgY29sb3I/OiBzdHJpbmc7XG4gIGZvbnRTaXplPzogbnVtYmVyO1xuICBsaW5lQ29sb3I/OiBzdHJpbmcgfCBib29sZWFuO1xuICBzcGxpdENvbG9yPzogc3RyaW5nIHwgYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIGl0ZW1TdHlsZVByb3BzIHtcbiAgaXNTdGFjaz86IGJvb2xlYW47XG4gIGJhcldpZHRoPzogbnVtYmVyO1xuICBib3JkZXJSYWRpdXM/OiBudW1iZXJbXTtcbn1cblxuaW50ZXJmYWNlIEJhclN0YWNrZWRQcm9wcyB7XG4gIGRhdGE/OiBhbnlbXTtcbiAgd2lkdGg/OiBzdHJpbmc7XG4gIGhlaWdodD86IHN0cmluZztcbiAgLyoqIOaYr+WQpuaoquaOkiAqL1xuICBpc0hvcml6b250YWw/OiBib29sZWFuO1xuICAvKiog5a2X5L2T6aKc6ImyICovXG4gIGNvbG9yPzogc3RyaW5nO1xuICAvKiogeCwgeei9tOi9tOe6v+e6v+adoeminOiJsiAqL1xuICBsaW5lQ29sb3I/OiBzdHJpbmc7XG4gIC8qKiB4LCB56L20572R5qC857q/5p2h6aKc6ImyICovXG4gIHNwbGl0Q29sb3I/OiBzdHJpbmc7XG4gIC8qKiDlrZfkvZPlpKflsI/vvIzpu5jorqQxNOWDj+e0oCAqL1xuICBmb250U2l6ZT86IG51bWJlciB8IHN0cmluZztcbiAgLyoqIOaKmOe6v+minOiJsiAqL1xuICBjb2xvcnM/OiBzdHJpbmdbXTtcbiAgLyoqIOaYr+WQpuiHquWKqOWIh+aNoiBUb29sdGlwICovXG4gIGlzU3dpdGNoPzogYm9vbGVhbjtcbiAgLyoqIOiHquWKqOWIh+aNouS6i+S7tiDpu5jorqQgMjAwMO+8iDJT77yJICovXG4gIHN3aXRjaFRpbWU/OiBudW1iZXI7XG4gIC8qKiDlm77kvovnu4Tku7YsIGFwaTogaHR0cHM6Ly9lY2hhcnRzLmFwYWNoZS5vcmcvemgvb3B0aW9uLmh0bWwjbGVnZW5kICovXG4gIGxlZ2VuZD86IExlZ2VuZENvbXBvbmVudE9wdGlvbjtcbiAgLyoqXG4gICAqIFgg6L206YWN572uXG4gICAqIEBjb2xvciDmloflrZfpopzoibJcbiAgICogQHNpemUg5paH5a2X5aSn5bCPXG4gICAqIEBsaW5lQ29sb3IgeOi9tOi9tOe6v+e6v+adoeminOiJsiwgZmFsc2Ug5YiZ5LiN5pi+56S6XG4gICAqIEBzcGxpdENvbG9yIHjovbTnvZHmoLznur/mnaHpopzoibIsIGZhbHNlIOWImeS4jeaYvuekuiwg6buY6K6kdHJ1ZVxuICAgKiBAcm90YXRlIOWIu+W6puagh+etvuaXi+i9rOinkuW6plxuICAgKiBAaXNUaWNrIOaYr+WQpuaYvuekuuWdkOagh+i9tOWIu+W6plxuICAgKi9cbiAgeEF4aXM/OiB4QXhpc1Byb3BzO1xuICAvKipcbiAgICogeSDovbTphY3nva5cbiAgICogQG5hbWUg5Z2Q5qCH6L205ZCN56ewXG4gICAqIEBjb2xvciDmloflrZfpopzoibJcbiAgICogQHNpemUg5paH5a2X5aSn5bCPXG4gICAqIEBsaW5lQ29sb3Igeei9tOi9tOe6v+e6v+adoeminOiJsiwgZmFsc2Ug5YiZ5LiN5pi+56S6XG4gICAqIEBzcGxpdENvbG9yIHnovbTnvZHmoLznur/mnaHpopzoibIsIGZhbHNlIOWImeS4jeaYvuekuiwg6buY6K6kZmFsc2VcbiAgICovXG4gIHlBeGlzPzogeUF4aXNQcm9wcztcbiAgLyoqIOafseeKtuWbvuagt+W8jyAqL1xuICBpdGVtU3R5bGU/OiBpdGVtU3R5bGVQcm9wcztcbiAgZ3JpZD86IEdyaWRDb21wb25lbnRPcHRpb247XG4gIG9uQ2xpY2s/OiAodjogYW55KSA9PiB2b2lkO1xufVxuXG5jb25zdCBFQ2hhcnRzQmFyID0gKHByb3BzOiBCYXJTdGFja2VkUHJvcHMpID0+IHtcbiAgY29uc3Qge1xuICAgIHdpZHRoID0gJzEwMCUnLFxuICAgIGhlaWdodCA9ICcxMDAlJyxcbiAgICBpc0hvcml6b250YWwgPSBmYWxzZSxcbiAgICBjb2xvcnMgPSBbJyM1NDcwYzYnLCAnIzkxY2M3NScsICcjZmFjODU4JywgJyNlZTY2NjYnLCAnIzczYzBkZScsICcjM2JhMjcyJywgJyNmYzg0NTInLCAnIzlhNjBiNCcsICcjZWE3Y2NjJ10sXG4gICAgY29sb3IgPSAnIzMzMycsXG4gICAgbGluZUNvbG9yID0gJyNhYmI5ZDAnLFxuICAgIHNwbGl0Q29sb3IgPSAnI2UwZTdmMycsXG4gICAgZm9udFNpemUgPSAxNCxcbiAgICBsZWdlbmQgPSB7fSxcbiAgICBkYXRhID0gW10sXG4gICAgeEF4aXMgPSB7fSxcbiAgICB5QXhpcyA9IHt9LFxuICAgIGdyaWQgPSB7fSxcbiAgICBpdGVtU3R5bGUgPSB7fSxcbiAgICBpc1N3aXRjaCA9IGZhbHNlLFxuICAgIHN3aXRjaFRpbWUgPSAyMDAwLFxuICAgIG9uQ2xpY2tcbiAgfSA9IHByb3BzO1xuXG4gIGNvbnN0IGNoYXJ0UmVmID0gdXNlUmVmPGFueT4obnVsbClcbiAgY29uc3QgW215Q2hhcnQsIHNldE15Q2hhcnRdID0gdXNlU3RhdGU8YW55PihudWxsKTtcbiAgY29uc3QgW2lzSGlnaF0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XG4gIGNvbnN0IFtoaWdoSW5kZXgsIHNldEhpZ2hJbmRleF0gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xuICBcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBfbXlDaGFydDogYW55ID0gZWNoYXJ0cy5pbml0KGNoYXJ0UmVmLmN1cnJlbnQpO1xuICAgIHNldE15Q2hhcnQoX215Q2hhcnQpXG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBfbXlDaGFydC5yZXNpemUsIGZhbHNlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIF9teUNoYXJ0LnJlc2l6ZSwgZmFsc2UpO1xuICAgIF9teUNoYXJ0Lm9mZignY2xpY2snKTtcbiAgICBfbXlDaGFydC5vbignY2xpY2snLCAodjogYW55KSA9PiB7XG4gICAgICBvbkNsaWNrPy4odi5kYXRhKTtcbiAgICB9KVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgX215Q2hhcnQucmVzaXplLCBmYWxzZSk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIF9teUNoYXJ0LnJlc2l6ZSwgZmFsc2UpO1xuICAgICAgX215Q2hhcnQuZGlzcG9zZSgpO1xuICAgIH1cbiAgfSwgW10pXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobXlDaGFydCkge1xuICAgICAgbXlDaGFydC5jbGVhcigpO1xuICAgICAgY29uc3QgX25hbWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgY29uc3QgX3NlcmllczogYW55W10gPSBbXTtcbiAgICAgIGNvbnN0IF9zZXJpZXNOYW1lOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgaWYgKGRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICBkYXRhLm1hcCgoaXRlbTogYW55LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgY29uc3QgX3ZhbHVlOiBhbnlbXSA9IFtdO1xuICAgICAgICAgIF9uYW1lcy5wdXNoKGl0ZW0ubmFtZSk7XG4gICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBpdGVtLmNoaWxkLm1hcCgoaXRlbTI6IGFueSkgPT4ge1xuICAgICAgICAgICAgICBfc2VyaWVzTmFtZS5wdXNoKGl0ZW0yLm5hbWUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgX3Nlcmllc05hbWUubWFwKChpdGVtOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgICBjb25zdCBfdjogYW55W10gPSBbXTtcbiAgICAgICAgICBkYXRhLm1hcCgoaXRlbTI6IGFueSkgPT4ge1xuICAgICAgICAgICAgX3YucHVzaChpdGVtMi5jaGlsZFtpbmRleF0pXG4gICAgICAgICAgfSlcbiAgICAgICAgICBfc2VyaWVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogaXRlbSxcbiAgICAgICAgICAgIHN0YWNrOiBpdGVtU3R5bGUuaXNTdGFjayA/ICdzdGFjaycgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB0eXBlOiAnYmFyJyxcbiAgICAgICAgICAgIGJhcldpZHRoOiBpdGVtU3R5bGUuYmFyV2lkdGgsXG4gICAgICAgICAgICBpdGVtU3R5bGU6IHtcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiBpdGVtU3R5bGUuYm9yZGVyUmFkaXVzID8gaXRlbVN0eWxlLmJvcmRlclJhZGl1cyA6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhOiBfdlxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBjb25zdCBfZ3JpZDogR3JpZENvbXBvbmVudE9wdGlvbiA9IHsuLi57XG4gICAgICAgIHRvcDogJzE1JScsXG4gICAgICAgIGJvdHRvbTogJzEwJScsXG4gICAgICAgIGxlZnQ6ICcxMCUnLFxuICAgICAgICByaWdodDogJzUlJyxcbiAgICAgIH0sIC4uLmdyaWR9O1xuICAgICAgY29uc3QgX2xlZ2VuZDogTGVnZW5kQ29tcG9uZW50T3B0aW9uID0gey4uLntcbiAgICAgICAgc2hvdzogdHJ1ZSxcbiAgICAgICAgaWNvbjogJ2NpcmNsZScsXG4gICAgICAgIGRhdGE6IF9zZXJpZXNOYW1lXG4gICAgICB9LCAuLi5sZWdlbmR9O1xuICAgICAgY29uc3QgX3hBeGlzOiBhbnkgPSB7XG4gICAgICAgIHR5cGU6ICdjYXRlZ29yeScsXG4gICAgICAgIGF4aXNMYWJlbDoge1xuICAgICAgICAgIGNvbG9yOiB4QXhpcy5jb2xvciA/IHhBeGlzLmNvbG9yIDogY29sb3IsXG4gICAgICAgICAgZm9udFNpemU6IHhBeGlzLmZvbnRTaXplID8geEF4aXMuZm9udFNpemUgOiBmb250U2l6ZSxcbiAgICAgICAgICByb3RhdGU6IHhBeGlzLnJvdGF0ZSA/IHhBeGlzLnJvdGF0ZSA6IDAsXG4gICAgICAgIH0sXG4gICAgICAgIGF4aXNMaW5lOiB7XG4gICAgICAgICAgc2hvdzogeEF4aXMubGluZUNvbG9yID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZSxcbiAgICAgICAgICBsaW5lU3R5bGU6IHtcbiAgICAgICAgICAgIGNvbG9yOiB4QXhpcy5saW5lQ29sb3IgPyB4QXhpcy5saW5lQ29sb3IgOiBsaW5lQ29sb3IsXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBheGlzVGljazoge1xuICAgICAgICAgIHNob3c6IHhBeGlzLmlzVGljayxcbiAgICAgICAgfSxcbiAgICAgICAgc3BsaXRMaW5lOiB7XG4gICAgICAgICAgc2hvdzogeEF4aXMuc3BsaXRDb2xvciA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICBsaW5lU3R5bGU6IHtcbiAgICAgICAgICAgIGNvbG9yOiB4QXhpcy5zcGxpdENvbG9yID8geEF4aXMuc3BsaXRDb2xvciA6IHNwbGl0Q29sb3IsXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBfbmFtZXNcbiAgICAgIH1cbiAgICAgIGNvbnN0IF95QXhpczogYW55ID0ge1xuICAgICAgICBuYW1lOiB5QXhpcy5uYW1lLFxuICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICBheGlzTGFiZWw6IHtcbiAgICAgICAgICBjb2xvcjogeUF4aXMuY29sb3IgPyB5QXhpcy5jb2xvciA6IGNvbG9yLFxuICAgICAgICAgIGZvbnRTaXplOiB5QXhpcy5mb250U2l6ZSA/IHlBeGlzLmZvbnRTaXplIDogZm9udFNpemUsXG4gICAgICAgIH0sXG4gICAgICAgIGF4aXNMaW5lOiB7XG4gICAgICAgICAgc2hvdzogeUF4aXMubGluZUNvbG9yID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZSxcbiAgICAgICAgICBsaW5lU3R5bGU6IHtcbiAgICAgICAgICAgIGNvbG9yOiB5QXhpcy5saW5lQ29sb3IgPyB5QXhpcy5saW5lQ29sb3IgOiBsaW5lQ29sb3IsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgYXhpc1RpY2s6IHtcbiAgICAgICAgICBzaG93OiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgICAgc3BsaXRMaW5lOiB7XG4gICAgICAgICAgc2hvdzogeUF4aXMuc3BsaXRDb2xvciA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgbGluZVN0eWxlOiB7XG4gICAgICAgICAgICBjb2xvcjogeUF4aXMuc3BsaXRDb2xvciA/IHlBeGlzLnNwbGl0Q29sb3IgOiBzcGxpdENvbG9yLFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICAgIFxuICAgICAgbXlDaGFydC5zZXRPcHRpb24oe1xuICAgICAgICB0b29sdGlwOiB7XG4gICAgICAgICAgdHJpZ2dlcjogJ2F4aXMnLFxuICAgICAgICAgIHRyYW5zaXRpb25EdXJhdGlvbjogMCxcbiAgICAgICAgICBlbnRlcmFibGU6IHRydWUsXG4gICAgICAgICAgYXhpc1BvaW50ZXI6IHtcbiAgICAgICAgICAgIHR5cGU6ICdzaGFkb3cnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb2xvcjogY29sb3JzLFxuICAgICAgICBncmlkOiBfZ3JpZCxcbiAgICAgICAgbGVnZW5kOiBfbGVnZW5kLFxuICAgICAgICB4QXhpczogaXNIb3Jpem9udGFsID8gX3lBeGlzIDogX3hBeGlzLFxuICAgICAgICB5QXhpczogaXNIb3Jpem9udGFsID8gX3hBeGlzIDogX3lBeGlzLFxuICAgICAgICBzZXJpZXM6IF9zZXJpZXNcbiAgICAgIH0sIHRydWUpO1xuICAgIH1cbiAgfSwgW215Q2hhcnQsIGRhdGFdKVxuICBcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgZmF1bHRCeUhvdXJUaW1lOiBhbnk7XG4gICAgaWYgKG15Q2hhcnQgJiYgaXNTd2l0Y2ggJiYgIWlzSGlnaCAmJiBkYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgIGZhdWx0QnlIb3VyVGltZSA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgc2V0SGlnaEluZGV4KG4gPT4ge1xuICAgICAgICAgIG15Q2hhcnQuZGlzcGF0Y2hBY3Rpb24oe1xuICAgICAgICAgICAgdHlwZTogJ3Nob3dUaXAnLFxuICAgICAgICAgICAgc2VyaWVzSW5kZXg6IDAsXG4gICAgICAgICAgICBkYXRhSW5kZXg6IG5cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAobiA+PSBkYXRhLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbiArIDFcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9LCBzd2l0Y2hUaW1lKVxuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY2xlYXJJbnRlcnZhbChmYXVsdEJ5SG91clRpbWUpXG4gICAgfVxuICB9LCBbbXlDaGFydCwgaXNTd2l0Y2gsIGlzSGlnaCwgZGF0YV0pXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHJlZj17Y2hhcnRSZWZ9XG4gICAgICBzdHlsZT17e1xuICAgICAgICAnd2lkdGgnOiB3aWR0aCxcbiAgICAgICAgJ2hlaWdodCc6IGhlaWdodFxuICAgICAgfX0+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgRUNoYXJ0c0JhcjsiXX0=