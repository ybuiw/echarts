import _objectSpread from "@babel/runtime/helpers/objectSpread2";
import _slicedToArray from "@babel/runtime/helpers/slicedToArray";
import React, { useEffect, useRef, useState } from 'react';
import * as echarts from 'echarts/core';
import { GridComponent, TooltipComponent } from 'echarts/components';
import { LineChart } from 'echarts/charts';
import { CanvasRenderer } from 'echarts/renderers';
echarts.use([GridComponent, TooltipComponent, LineChart, CanvasRenderer]);

var EChartsLine = function EChartsLine(props) {
  var _props$width = props.width,
      width = _props$width === void 0 ? '100%' : _props$width,
      _props$height = props.height,
      height = _props$height === void 0 ? '100%' : _props$height,
      _props$smooth = props.smooth,
      smooth = _props$smooth === void 0 ? false : _props$smooth,
      _props$colors = props.colors,
      colors = _props$colors === void 0 ? ['#5470c6', '#91cc75', '#fac858', '#ee6666', '#73c0de', '#3ba272', '#fc8452', '#9a60b4', '#ea7ccc'] : _props$colors,
      _props$color = props.color,
      color = _props$color === void 0 ? '#333' : _props$color,
      _props$lineColor = props.lineColor,
      lineColor = _props$lineColor === void 0 ? '#abb9d0' : _props$lineColor,
      _props$splitColor = props.splitColor,
      splitColor = _props$splitColor === void 0 ? '#e0e7f3' : _props$splitColor,
      _props$fontSize = props.fontSize,
      fontSize = _props$fontSize === void 0 ? 14 : _props$fontSize,
      _props$data = props.data,
      data = _props$data === void 0 ? [] : _props$data,
      _props$xAxis = props.xAxis,
      xAxis = _props$xAxis === void 0 ? {} : _props$xAxis,
      _props$yAxis = props.yAxis,
      yAxis = _props$yAxis === void 0 ? {} : _props$yAxis,
      _props$grid = props.grid,
      grid = _props$grid === void 0 ? {} : _props$grid,
      _props$areaStyle = props.areaStyle,
      areaStyle = _props$areaStyle === void 0 ? {} : _props$areaStyle,
      _props$isSwitch = props.isSwitch,
      isSwitch = _props$isSwitch === void 0 ? false : _props$isSwitch,
      _props$switchTime = props.switchTime,
      switchTime = _props$switchTime === void 0 ? 2000 : _props$switchTime,
      onClick = props.onClick;
  var chartRef = useRef(null);

  var _useState = useState(null),
      _useState2 = _slicedToArray(_useState, 2),
      myChart = _useState2[0],
      setMyChart = _useState2[1];

  var _useState3 = useState(false),
      _useState4 = _slicedToArray(_useState3, 1),
      isHigh = _useState4[0];

  var _useState5 = useState(0),
      _useState6 = _slicedToArray(_useState5, 2),
      highIndex = _useState6[0],
      setHighIndex = _useState6[1];

  useEffect(function () {
    var _myChart = echarts.init(chartRef.current);

    setMyChart(_myChart);
    window.addEventListener("resize", _myChart.resize, false);
    window.addEventListener('load', _myChart.resize, false);

    _myChart.off('click');

    _myChart.on('click', function (v) {
      onClick === null || onClick === void 0 ? void 0 : onClick(v.data);
      console.log(v.data);
    });

    return function () {
      console.log(2);
      window.removeEventListener('resize', _myChart.resize, false);
      window.removeEventListener('load', _myChart.resize, false);

      _myChart.dispose();
    };
  }, []);
  useEffect(function () {
    if (myChart) {
      myChart.clear();
      var _names = [];
      data.length > 0 && data.map(function (item) {
        _names.push(item.name);
      });

      var _grid = _objectSpread(_objectSpread({}, {
        top: '5%',
        bottom: '10%',
        left: '10%',
        right: '5%'
      }), grid);

      var _xAxis = {
        type: 'category',
        boundaryGap: false,
        axisLabel: {
          color: xAxis.color ? xAxis.color : color,
          fontSize: xAxis.fontSize ? xAxis.fontSize : fontSize,
          rotate: xAxis.rotate ? xAxis.rotate : 0
        },
        axisLine: {
          show: xAxis.lineColor === false ? false : true,
          lineStyle: {
            color: xAxis.lineColor ? xAxis.lineColor : lineColor
          }
        },
        axisTick: {
          show: xAxis.isTick
        },
        splitLine: {
          show: xAxis.splitColor ? true : false,
          lineStyle: {
            color: xAxis.splitColor ? xAxis.splitColor : splitColor
          }
        },
        data: _names
      };
      var _yAxis = {
        name: yAxis.name,
        type: 'value',
        axisLabel: {
          color: yAxis.color ? yAxis.color : color,
          fontSize: yAxis.fontSize ? yAxis.fontSize : fontSize
        },
        axisLine: {
          show: yAxis.lineColor === false ? false : true,
          lineStyle: {
            color: yAxis.lineColor ? yAxis.lineColor : lineColor
          }
        },
        axisTick: {
          show: false
        },
        splitLine: {
          show: yAxis.splitColor === false ? false : true,
          lineStyle: {
            color: yAxis.splitColor ? yAxis.splitColor : splitColor
          }
        }
      };

      var _areaColor;

      if (areaStyle.isGrad) {
        if (Array.isArray(areaStyle.color) && areaStyle.color.length > 1) {
          _areaColor = {
            type: 'linear',
            x: 0,
            y: 0,
            x2: 0,
            y2: 1,
            colorStops: [{
              offset: 0,
              color: areaStyle.color[0]
            }, {
              offset: 1,
              color: areaStyle.color[1]
            }],
            global: false
          };
        } else {
          _areaColor = {
            type: 'linear',
            x: 0,
            y: 0,
            x2: 0,
            y2: 1,
            colorStops: [{
              offset: 0,
              color: colors[0]
            }, {
              offset: 1,
              color: 'rgba(255,255,255,0)'
            }],
            global: false
          };
        }
      }

      myChart.setOption({
        tooltip: {
          trigger: 'axis',
          transitionDuration: 0,
          enterable: true,
          axisPointer: {
            type: 'shadow'
          }
        },
        color: colors,
        grid: _grid,
        xAxis: _xAxis,
        yAxis: _yAxis,
        series: [{
          data: data,
          type: 'line',
          smooth: smooth,
          areaStyle: areaStyle.show ? {
            color: _areaColor
          } : undefined,
          lineStyle: {
            width: 1
          }
        }]
      }, true);
    }
  }, [myChart, data]);
  useEffect(function () {
    var faultByHourTime;

    if (myChart && isSwitch && !isHigh && data.length > 0) {
      faultByHourTime = setInterval(function () {
        setHighIndex(function (n) {
          myChart.dispatchAction({
            type: 'showTip',
            seriesIndex: 0,
            dataIndex: n
          });

          if (n >= data.length - 1) {
            return 0;
          } else {
            return n + 1;
          }
        });
      }, switchTime);
    }

    return function () {
      clearInterval(faultByHourTime);
    };
  }, [myChart, isSwitch, isHigh, data]);
  return /*#__PURE__*/React.createElement("div", {
    ref: chartRef,
    style: {
      'width': width,
      'height': height
    }
  });
};

export default EChartsLine;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pbmRleC50c3giXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsImVjaGFydHMiLCJHcmlkQ29tcG9uZW50IiwiVG9vbHRpcENvbXBvbmVudCIsIkxpbmVDaGFydCIsIkNhbnZhc1JlbmRlcmVyIiwidXNlIiwiRUNoYXJ0c0xpbmUiLCJwcm9wcyIsIndpZHRoIiwiaGVpZ2h0Iiwic21vb3RoIiwiY29sb3JzIiwiY29sb3IiLCJsaW5lQ29sb3IiLCJzcGxpdENvbG9yIiwiZm9udFNpemUiLCJkYXRhIiwieEF4aXMiLCJ5QXhpcyIsImdyaWQiLCJhcmVhU3R5bGUiLCJpc1N3aXRjaCIsInN3aXRjaFRpbWUiLCJvbkNsaWNrIiwiY2hhcnRSZWYiLCJteUNoYXJ0Iiwic2V0TXlDaGFydCIsImlzSGlnaCIsImhpZ2hJbmRleCIsInNldEhpZ2hJbmRleCIsIl9teUNoYXJ0IiwiaW5pdCIsImN1cnJlbnQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVzaXplIiwib2ZmIiwib24iLCJ2IiwiY29uc29sZSIsImxvZyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJkaXNwb3NlIiwiY2xlYXIiLCJfbmFtZXMiLCJsZW5ndGgiLCJtYXAiLCJpdGVtIiwicHVzaCIsIm5hbWUiLCJfZ3JpZCIsInRvcCIsImJvdHRvbSIsImxlZnQiLCJyaWdodCIsIl94QXhpcyIsInR5cGUiLCJib3VuZGFyeUdhcCIsImF4aXNMYWJlbCIsInJvdGF0ZSIsImF4aXNMaW5lIiwic2hvdyIsImxpbmVTdHlsZSIsImF4aXNUaWNrIiwiaXNUaWNrIiwic3BsaXRMaW5lIiwiX3lBeGlzIiwiX2FyZWFDb2xvciIsImlzR3JhZCIsIkFycmF5IiwiaXNBcnJheSIsIngiLCJ5IiwieDIiLCJ5MiIsImNvbG9yU3RvcHMiLCJvZmZzZXQiLCJnbG9iYWwiLCJzZXRPcHRpb24iLCJ0b29sdGlwIiwidHJpZ2dlciIsInRyYW5zaXRpb25EdXJhdGlvbiIsImVudGVyYWJsZSIsImF4aXNQb2ludGVyIiwic2VyaWVzIiwidW5kZWZpbmVkIiwiZmF1bHRCeUhvdXJUaW1lIiwic2V0SW50ZXJ2YWwiLCJuIiwiZGlzcGF0Y2hBY3Rpb24iLCJzZXJpZXNJbmRleCIsImRhdGFJbmRleCIsImNsZWFySW50ZXJ2YWwiXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBT0EsS0FBUCxJQUFnQkMsU0FBaEIsRUFBMkJDLE1BQTNCLEVBQW1DQyxRQUFuQyxRQUFtRCxPQUFuRDtBQUVBLE9BQU8sS0FBS0MsT0FBWixNQUF5QixjQUF6QjtBQUNBLFNBQVNDLGFBQVQsRUFBd0JDLGdCQUF4QixRQUFxRSxvQkFBckU7QUFDQSxTQUFTQyxTQUFULFFBQTBCLGdCQUExQjtBQUNBLFNBQVNDLGNBQVQsUUFBK0IsbUJBQS9CO0FBRUFKLE9BQU8sQ0FBQ0ssR0FBUixDQUNFLENBQUNKLGFBQUQsRUFBZ0JDLGdCQUFoQixFQUFrQ0MsU0FBbEMsRUFBNkNDLGNBQTdDLENBREY7O0FBd0VBLElBQU1FLFdBQVcsR0FBRyxTQUFkQSxXQUFjLENBQUNDLEtBQUQsRUFBMEI7QUFDNUMscUJBaUJJQSxLQWpCSixDQUNFQyxLQURGO0FBQUEsTUFDRUEsS0FERiw2QkFDVSxNQURWO0FBQUEsc0JBaUJJRCxLQWpCSixDQUVFRSxNQUZGO0FBQUEsTUFFRUEsTUFGRiw4QkFFVyxNQUZYO0FBQUEsc0JBaUJJRixLQWpCSixDQUdFRyxNQUhGO0FBQUEsTUFHRUEsTUFIRiw4QkFHVyxLQUhYO0FBQUEsc0JBaUJJSCxLQWpCSixDQUlFSSxNQUpGO0FBQUEsTUFJRUEsTUFKRiw4QkFJVyxDQUFDLFNBQUQsRUFBWSxTQUFaLEVBQXVCLFNBQXZCLEVBQWtDLFNBQWxDLEVBQTZDLFNBQTdDLEVBQXdELFNBQXhELEVBQW1FLFNBQW5FLEVBQThFLFNBQTlFLEVBQXlGLFNBQXpGLENBSlg7QUFBQSxxQkFpQklKLEtBakJKLENBS0VLLEtBTEY7QUFBQSxNQUtFQSxLQUxGLDZCQUtVLE1BTFY7QUFBQSx5QkFpQklMLEtBakJKLENBTUVNLFNBTkY7QUFBQSxNQU1FQSxTQU5GLGlDQU1jLFNBTmQ7QUFBQSwwQkFpQklOLEtBakJKLENBT0VPLFVBUEY7QUFBQSxNQU9FQSxVQVBGLGtDQU9lLFNBUGY7QUFBQSx3QkFpQklQLEtBakJKLENBUUVRLFFBUkY7QUFBQSxNQVFFQSxRQVJGLGdDQVFhLEVBUmI7QUFBQSxvQkFpQklSLEtBakJKLENBU0VTLElBVEY7QUFBQSxNQVNFQSxJQVRGLDRCQVNTLEVBVFQ7QUFBQSxxQkFpQklULEtBakJKLENBVUVVLEtBVkY7QUFBQSxNQVVFQSxLQVZGLDZCQVVVLEVBVlY7QUFBQSxxQkFpQklWLEtBakJKLENBV0VXLEtBWEY7QUFBQSxNQVdFQSxLQVhGLDZCQVdVLEVBWFY7QUFBQSxvQkFpQklYLEtBakJKLENBWUVZLElBWkY7QUFBQSxNQVlFQSxJQVpGLDRCQVlTLEVBWlQ7QUFBQSx5QkFpQklaLEtBakJKLENBYUVhLFNBYkY7QUFBQSxNQWFFQSxTQWJGLGlDQWFjLEVBYmQ7QUFBQSx3QkFpQkliLEtBakJKLENBY0VjLFFBZEY7QUFBQSxNQWNFQSxRQWRGLGdDQWNhLEtBZGI7QUFBQSwwQkFpQklkLEtBakJKLENBZUVlLFVBZkY7QUFBQSxNQWVFQSxVQWZGLGtDQWVlLElBZmY7QUFBQSxNQWdCRUMsT0FoQkYsR0FpQkloQixLQWpCSixDQWdCRWdCLE9BaEJGO0FBbUJBLE1BQU1DLFFBQVEsR0FBRzFCLE1BQU0sQ0FBTSxJQUFOLENBQXZCOztBQUNBLGtCQUE4QkMsUUFBUSxDQUFNLElBQU4sQ0FBdEM7QUFBQTtBQUFBLE1BQU8wQixPQUFQO0FBQUEsTUFBZ0JDLFVBQWhCOztBQUNBLG1CQUFpQjNCLFFBQVEsQ0FBVSxLQUFWLENBQXpCO0FBQUE7QUFBQSxNQUFPNEIsTUFBUDs7QUFDQSxtQkFBa0M1QixRQUFRLENBQVMsQ0FBVCxDQUExQztBQUFBO0FBQUEsTUFBTzZCLFNBQVA7QUFBQSxNQUFrQkMsWUFBbEI7O0FBR0FoQyxFQUFBQSxTQUFTLENBQUMsWUFBTTtBQUNkLFFBQUlpQyxRQUFhLEdBQUc5QixPQUFPLENBQUMrQixJQUFSLENBQWFQLFFBQVEsQ0FBQ1EsT0FBdEIsQ0FBcEI7O0FBQ0FOLElBQUFBLFVBQVUsQ0FBQ0ksUUFBRCxDQUFWO0FBRUFHLElBQUFBLE1BQU0sQ0FBQ0MsZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0NKLFFBQVEsQ0FBQ0ssTUFBM0MsRUFBbUQsS0FBbkQ7QUFDQUYsSUFBQUEsTUFBTSxDQUFDQyxnQkFBUCxDQUF3QixNQUF4QixFQUFnQ0osUUFBUSxDQUFDSyxNQUF6QyxFQUFpRCxLQUFqRDs7QUFDQUwsSUFBQUEsUUFBUSxDQUFDTSxHQUFULENBQWEsT0FBYjs7QUFDQU4sSUFBQUEsUUFBUSxDQUFDTyxFQUFULENBQVksT0FBWixFQUFxQixVQUFDQyxDQUFELEVBQVk7QUFDL0JmLE1BQUFBLE9BQU8sU0FBUCxJQUFBQSxPQUFPLFdBQVAsWUFBQUEsT0FBTyxDQUFHZSxDQUFDLENBQUN0QixJQUFMLENBQVA7QUFDQXVCLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRixDQUFDLENBQUN0QixJQUFkO0FBQ0QsS0FIRDs7QUFJQSxXQUFPLFlBQU07QUFDWHVCLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLENBQVo7QUFDQVAsTUFBQUEsTUFBTSxDQUFDUSxtQkFBUCxDQUEyQixRQUEzQixFQUFxQ1gsUUFBUSxDQUFDSyxNQUE5QyxFQUFzRCxLQUF0RDtBQUNBRixNQUFBQSxNQUFNLENBQUNRLG1CQUFQLENBQTJCLE1BQTNCLEVBQW1DWCxRQUFRLENBQUNLLE1BQTVDLEVBQW9ELEtBQXBEOztBQUNBTCxNQUFBQSxRQUFRLENBQUNZLE9BQVQ7QUFDRCxLQUxEO0FBTUQsR0FqQlEsRUFpQk4sRUFqQk0sQ0FBVDtBQW1CQTdDLEVBQUFBLFNBQVMsQ0FBQyxZQUFNO0FBQ2QsUUFBSTRCLE9BQUosRUFBYTtBQUNYQSxNQUFBQSxPQUFPLENBQUNrQixLQUFSO0FBQ0EsVUFBTUMsTUFBZ0IsR0FBRyxFQUF6QjtBQUNBNUIsTUFBQUEsSUFBSSxDQUFDNkIsTUFBTCxHQUFjLENBQWQsSUFBbUI3QixJQUFJLENBQUM4QixHQUFMLENBQVMsVUFBQ0MsSUFBRCxFQUFlO0FBQ3pDSCxRQUFBQSxNQUFNLENBQUNJLElBQVAsQ0FBWUQsSUFBSSxDQUFDRSxJQUFqQjtBQUNELE9BRmtCLENBQW5COztBQUdBLFVBQU1DLEtBQTBCLG1DQUFPO0FBQ3JDQyxRQUFBQSxHQUFHLEVBQUUsSUFEZ0M7QUFFckNDLFFBQUFBLE1BQU0sRUFBRSxLQUY2QjtBQUdyQ0MsUUFBQUEsSUFBSSxFQUFFLEtBSCtCO0FBSXJDQyxRQUFBQSxLQUFLLEVBQUU7QUFKOEIsT0FBUCxHQUsxQm5DLElBTDBCLENBQWhDOztBQU1BLFVBQU1vQyxNQUFXLEdBQUc7QUFDbEJDLFFBQUFBLElBQUksRUFBRSxVQURZO0FBRWxCQyxRQUFBQSxXQUFXLEVBQUUsS0FGSztBQUdsQkMsUUFBQUEsU0FBUyxFQUFFO0FBQ1Q5QyxVQUFBQSxLQUFLLEVBQUVLLEtBQUssQ0FBQ0wsS0FBTixHQUFjSyxLQUFLLENBQUNMLEtBQXBCLEdBQTRCQSxLQUQxQjtBQUVURyxVQUFBQSxRQUFRLEVBQUVFLEtBQUssQ0FBQ0YsUUFBTixHQUFpQkUsS0FBSyxDQUFDRixRQUF2QixHQUFrQ0EsUUFGbkM7QUFHVDRDLFVBQUFBLE1BQU0sRUFBRTFDLEtBQUssQ0FBQzBDLE1BQU4sR0FBZTFDLEtBQUssQ0FBQzBDLE1BQXJCLEdBQThCO0FBSDdCLFNBSE87QUFRbEJDLFFBQUFBLFFBQVEsRUFBRTtBQUNSQyxVQUFBQSxJQUFJLEVBQUU1QyxLQUFLLENBQUNKLFNBQU4sS0FBb0IsS0FBcEIsR0FBNEIsS0FBNUIsR0FBb0MsSUFEbEM7QUFFUmlELFVBQUFBLFNBQVMsRUFBRTtBQUNUbEQsWUFBQUEsS0FBSyxFQUFFSyxLQUFLLENBQUNKLFNBQU4sR0FBa0JJLEtBQUssQ0FBQ0osU0FBeEIsR0FBb0NBO0FBRGxDO0FBRkgsU0FSUTtBQWNsQmtELFFBQUFBLFFBQVEsRUFBRTtBQUNSRixVQUFBQSxJQUFJLEVBQUU1QyxLQUFLLENBQUMrQztBQURKLFNBZFE7QUFpQmxCQyxRQUFBQSxTQUFTLEVBQUU7QUFDVEosVUFBQUEsSUFBSSxFQUFFNUMsS0FBSyxDQUFDSCxVQUFOLEdBQW1CLElBQW5CLEdBQTBCLEtBRHZCO0FBRVRnRCxVQUFBQSxTQUFTLEVBQUU7QUFDVGxELFlBQUFBLEtBQUssRUFBRUssS0FBSyxDQUFDSCxVQUFOLEdBQW1CRyxLQUFLLENBQUNILFVBQXpCLEdBQXNDQTtBQURwQztBQUZGLFNBakJPO0FBdUJsQkUsUUFBQUEsSUFBSSxFQUFFNEI7QUF2QlksT0FBcEI7QUF5QkEsVUFBTXNCLE1BQVcsR0FBRztBQUNsQmpCLFFBQUFBLElBQUksRUFBRS9CLEtBQUssQ0FBQytCLElBRE07QUFFbEJPLFFBQUFBLElBQUksRUFBRSxPQUZZO0FBR2xCRSxRQUFBQSxTQUFTLEVBQUU7QUFDVDlDLFVBQUFBLEtBQUssRUFBRU0sS0FBSyxDQUFDTixLQUFOLEdBQWNNLEtBQUssQ0FBQ04sS0FBcEIsR0FBNEJBLEtBRDFCO0FBRVRHLFVBQUFBLFFBQVEsRUFBRUcsS0FBSyxDQUFDSCxRQUFOLEdBQWlCRyxLQUFLLENBQUNILFFBQXZCLEdBQWtDQTtBQUZuQyxTQUhPO0FBT2xCNkMsUUFBQUEsUUFBUSxFQUFFO0FBQ1JDLFVBQUFBLElBQUksRUFBRTNDLEtBQUssQ0FBQ0wsU0FBTixLQUFvQixLQUFwQixHQUE0QixLQUE1QixHQUFvQyxJQURsQztBQUVSaUQsVUFBQUEsU0FBUyxFQUFFO0FBQ1RsRCxZQUFBQSxLQUFLLEVBQUVNLEtBQUssQ0FBQ0wsU0FBTixHQUFrQkssS0FBSyxDQUFDTCxTQUF4QixHQUFvQ0E7QUFEbEM7QUFGSCxTQVBRO0FBYWxCa0QsUUFBQUEsUUFBUSxFQUFFO0FBQ1JGLFVBQUFBLElBQUksRUFBRTtBQURFLFNBYlE7QUFnQmxCSSxRQUFBQSxTQUFTLEVBQUU7QUFDVEosVUFBQUEsSUFBSSxFQUFFM0MsS0FBSyxDQUFDSixVQUFOLEtBQXFCLEtBQXJCLEdBQTZCLEtBQTdCLEdBQXFDLElBRGxDO0FBRVRnRCxVQUFBQSxTQUFTLEVBQUU7QUFDVGxELFlBQUFBLEtBQUssRUFBRU0sS0FBSyxDQUFDSixVQUFOLEdBQW1CSSxLQUFLLENBQUNKLFVBQXpCLEdBQXNDQTtBQURwQztBQUZGO0FBaEJPLE9BQXBCOztBQXVCQSxVQUFJcUQsVUFBSjs7QUFDQSxVQUFJL0MsU0FBUyxDQUFDZ0QsTUFBZCxFQUFzQjtBQUNwQixZQUFJQyxLQUFLLENBQUNDLE9BQU4sQ0FBY2xELFNBQVMsQ0FBQ1IsS0FBeEIsS0FBa0NRLFNBQVMsQ0FBQ1IsS0FBVixDQUFnQmlDLE1BQWhCLEdBQXlCLENBQS9ELEVBQWtFO0FBQ2hFc0IsVUFBQUEsVUFBVSxHQUFHO0FBQ1hYLFlBQUFBLElBQUksRUFBRSxRQURLO0FBRVhlLFlBQUFBLENBQUMsRUFBRSxDQUZRO0FBR1hDLFlBQUFBLENBQUMsRUFBRSxDQUhRO0FBSVhDLFlBQUFBLEVBQUUsRUFBRSxDQUpPO0FBS1hDLFlBQUFBLEVBQUUsRUFBRSxDQUxPO0FBTVhDLFlBQUFBLFVBQVUsRUFBRSxDQUFDO0FBQ1hDLGNBQUFBLE1BQU0sRUFBRSxDQURHO0FBQ0FoRSxjQUFBQSxLQUFLLEVBQUVRLFNBQVMsQ0FBQ1IsS0FBVixDQUFnQixDQUFoQjtBQURQLGFBQUQsRUFFVDtBQUNDZ0UsY0FBQUEsTUFBTSxFQUFFLENBRFQ7QUFDWWhFLGNBQUFBLEtBQUssRUFBRVEsU0FBUyxDQUFDUixLQUFWLENBQWdCLENBQWhCO0FBRG5CLGFBRlMsQ0FORDtBQVdYaUUsWUFBQUEsTUFBTSxFQUFFO0FBWEcsV0FBYjtBQWFELFNBZEQsTUFjTztBQUNMVixVQUFBQSxVQUFVLEdBQUc7QUFDWFgsWUFBQUEsSUFBSSxFQUFFLFFBREs7QUFFWGUsWUFBQUEsQ0FBQyxFQUFFLENBRlE7QUFHWEMsWUFBQUEsQ0FBQyxFQUFFLENBSFE7QUFJWEMsWUFBQUEsRUFBRSxFQUFFLENBSk87QUFLWEMsWUFBQUEsRUFBRSxFQUFFLENBTE87QUFNWEMsWUFBQUEsVUFBVSxFQUFFLENBQUM7QUFDWEMsY0FBQUEsTUFBTSxFQUFFLENBREc7QUFDQWhFLGNBQUFBLEtBQUssRUFBRUQsTUFBTSxDQUFDLENBQUQ7QUFEYixhQUFELEVBRVQ7QUFDRGlFLGNBQUFBLE1BQU0sRUFBRSxDQURQO0FBQ1VoRSxjQUFBQSxLQUFLLEVBQUU7QUFEakIsYUFGUyxDQU5EO0FBV1hpRSxZQUFBQSxNQUFNLEVBQUU7QUFYRyxXQUFiO0FBYUQ7QUFDRjs7QUFDRHBELE1BQUFBLE9BQU8sQ0FBQ3FELFNBQVIsQ0FBa0I7QUFDaEJDLFFBQUFBLE9BQU8sRUFBRTtBQUNQQyxVQUFBQSxPQUFPLEVBQUUsTUFERjtBQUVQQyxVQUFBQSxrQkFBa0IsRUFBRSxDQUZiO0FBR1BDLFVBQUFBLFNBQVMsRUFBRSxJQUhKO0FBSVBDLFVBQUFBLFdBQVcsRUFBRTtBQUNYM0IsWUFBQUEsSUFBSSxFQUFFO0FBREs7QUFKTixTQURPO0FBU2hCNUMsUUFBQUEsS0FBSyxFQUFFRCxNQVRTO0FBVWhCUSxRQUFBQSxJQUFJLEVBQUUrQixLQVZVO0FBV2hCakMsUUFBQUEsS0FBSyxFQUFFc0MsTUFYUztBQVloQnJDLFFBQUFBLEtBQUssRUFBRWdELE1BWlM7QUFhaEJrQixRQUFBQSxNQUFNLEVBQUUsQ0FDTjtBQUNFcEUsVUFBQUEsSUFBSSxFQUFFQSxJQURSO0FBRUV3QyxVQUFBQSxJQUFJLEVBQUUsTUFGUjtBQUdFOUMsVUFBQUEsTUFBTSxFQUFFQSxNQUhWO0FBSUVVLFVBQUFBLFNBQVMsRUFBRUEsU0FBUyxDQUFDeUMsSUFBVixHQUFpQjtBQUMxQmpELFlBQUFBLEtBQUssRUFBRXVEO0FBRG1CLFdBQWpCLEdBRVBrQixTQU5OO0FBT0V2QixVQUFBQSxTQUFTLEVBQUU7QUFDVHRELFlBQUFBLEtBQUssRUFBRTtBQURFO0FBUGIsU0FETTtBQWJRLE9BQWxCLEVBMEJHLElBMUJIO0FBMkJEO0FBQ0YsR0F6SFEsRUF5SE4sQ0FBQ2lCLE9BQUQsRUFBVVQsSUFBVixDQXpITSxDQUFUO0FBMkhBbkIsRUFBQUEsU0FBUyxDQUFDLFlBQU07QUFDZCxRQUFJeUYsZUFBSjs7QUFDQSxRQUFJN0QsT0FBTyxJQUFJSixRQUFYLElBQXVCLENBQUNNLE1BQXhCLElBQWtDWCxJQUFJLENBQUM2QixNQUFMLEdBQWMsQ0FBcEQsRUFBdUQ7QUFDckR5QyxNQUFBQSxlQUFlLEdBQUdDLFdBQVcsQ0FBQyxZQUFNO0FBQ2xDMUQsUUFBQUEsWUFBWSxDQUFDLFVBQUEyRCxDQUFDLEVBQUk7QUFDaEIvRCxVQUFBQSxPQUFPLENBQUNnRSxjQUFSLENBQXVCO0FBQ3JCakMsWUFBQUEsSUFBSSxFQUFFLFNBRGU7QUFFckJrQyxZQUFBQSxXQUFXLEVBQUUsQ0FGUTtBQUdyQkMsWUFBQUEsU0FBUyxFQUFFSDtBQUhVLFdBQXZCOztBQUtBLGNBQUlBLENBQUMsSUFBSXhFLElBQUksQ0FBQzZCLE1BQUwsR0FBYyxDQUF2QixFQUEwQjtBQUN4QixtQkFBTyxDQUFQO0FBQ0QsV0FGRCxNQUVPO0FBQ0wsbUJBQU8yQyxDQUFDLEdBQUcsQ0FBWDtBQUNEO0FBQ0YsU0FYVyxDQUFaO0FBWUQsT0FiNEIsRUFhMUJsRSxVQWIwQixDQUE3QjtBQWNEOztBQUNELFdBQU8sWUFBTTtBQUNYc0UsTUFBQUEsYUFBYSxDQUFDTixlQUFELENBQWI7QUFDRCxLQUZEO0FBR0QsR0FyQlEsRUFxQk4sQ0FBQzdELE9BQUQsRUFBVUosUUFBVixFQUFvQk0sTUFBcEIsRUFBNEJYLElBQTVCLENBckJNLENBQVQ7QUF1QkEsc0JBQ0U7QUFBSyxJQUFBLEdBQUcsRUFBRVEsUUFBVjtBQUNFLElBQUEsS0FBSyxFQUFFO0FBQ0wsZUFBU2hCLEtBREo7QUFFTCxnQkFBVUM7QUFGTDtBQURULElBREY7QUFRRCxDQXZNRDs7QUF5TUEsZUFBZUgsV0FBZiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcblxyXG5pbXBvcnQgKiBhcyBlY2hhcnRzIGZyb20gJ2VjaGFydHMvY29yZSc7XHJcbmltcG9ydCB7IEdyaWRDb21wb25lbnQsIFRvb2x0aXBDb21wb25lbnQsIEdyaWRDb21wb25lbnRPcHRpb24gfSBmcm9tICdlY2hhcnRzL2NvbXBvbmVudHMnO1xyXG5pbXBvcnQgeyBMaW5lQ2hhcnQgfSBmcm9tICdlY2hhcnRzL2NoYXJ0cyc7XHJcbmltcG9ydCB7IENhbnZhc1JlbmRlcmVyIH0gZnJvbSAnZWNoYXJ0cy9yZW5kZXJlcnMnO1xyXG5cclxuZWNoYXJ0cy51c2UoXHJcbiAgW0dyaWRDb21wb25lbnQsIFRvb2x0aXBDb21wb25lbnQsIExpbmVDaGFydCwgQ2FudmFzUmVuZGVyZXJdXHJcbik7XHJcblxyXG5pbnRlcmZhY2UgeEF4aXNQcm9wcyB7XHJcbiAgY29sb3I/OiBzdHJpbmc7XHJcbiAgZm9udFNpemU/OiBudW1iZXI7XHJcbiAgbGluZUNvbG9yPzogc3RyaW5nIHwgYm9vbGVhbjtcclxuICBzcGxpdENvbG9yPzogc3RyaW5nIHwgYm9vbGVhbjtcclxuICByb3RhdGU/OiBudW1iZXI7XHJcbiAgaXNUaWNrPzogYm9vbGVhbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIHlBeGlzUHJvcHMge1xyXG4gIG5hbWU/OiBzdHJpbmc7XHJcbiAgY29sb3I/OiBzdHJpbmc7XHJcbiAgZm9udFNpemU/OiBudW1iZXI7XHJcbiAgbGluZUNvbG9yPzogc3RyaW5nIHwgYm9vbGVhbjtcclxuICBzcGxpdENvbG9yPzogc3RyaW5nIHwgYm9vbGVhbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIGFyZWFTdHlsZVByb3BzIHtcclxuICBzaG93PzogYm9vbGVhbjtcclxuICBpc0dyYWQ/OiBib29sZWFuO1xyXG4gIGNvbG9yPzogc3RyaW5nW11cclxufVxyXG5cclxuaW50ZXJmYWNlIExpbmVCYXNlUHJvcHMge1xyXG4gIGRhdGE/OiBhbnlbXTtcclxuICB3aWR0aD86IHN0cmluZztcclxuICBoZWlnaHQ/OiBzdHJpbmc7XHJcbiAgLyoqIOaYr+WQpuW5s+a7keabsue6v+aYvuekuiAqL1xyXG4gIHNtb290aD86IGJvb2xlYW47XHJcbiAgLyoqIOWtl+S9k+minOiJsiAqL1xyXG4gIGNvbG9yPzogc3RyaW5nO1xyXG4gIC8qKiB4LCB56L206L2057q/57q/5p2h6aKc6ImyICovXHJcbiAgbGluZUNvbG9yPzogc3RyaW5nO1xyXG4gIC8qKiB4LCB56L20572R5qC857q/5p2h6aKc6ImyICovXHJcbiAgc3BsaXRDb2xvcj86IHN0cmluZztcclxuICAvKiog5a2X5L2T5aSn5bCP77yM6buY6K6kMTTlg4/ntKAgKi9cclxuICBmb250U2l6ZT86IG51bWJlciB8IHN0cmluZztcclxuICAvKiog5oqY57q/6aKc6ImyICovXHJcbiAgY29sb3JzPzogc3RyaW5nW107XHJcbiAgLyoqIOaYr+WQpuiHquWKqOWIh+aNoiBUb29sdGlwICovXHJcbiAgaXNTd2l0Y2g/OiBib29sZWFuO1xyXG4gIC8qKiDoh6rliqjliIfmjaLkuovku7Yg6buY6K6kIDIwMDDvvIgyU++8iSAqL1xyXG4gIHN3aXRjaFRpbWU/OiBudW1iZXI7XHJcbiAgLyoqIOWMuuWfn+Whq+WFheagt+W8jyAqL1xyXG4gIGFyZWFTdHlsZT86IGFyZWFTdHlsZVByb3BzO1xyXG4gIC8qKlxyXG4gICAqIFgg6L206YWN572uXHJcbiAgICogQGNvbG9yIOaWh+Wtl+minOiJslxyXG4gICAqIEBzaXplIOaWh+Wtl+Wkp+Wwj1xyXG4gICAqIEBsaW5lQ29sb3IgeOi9tOi9tOe6v+e6v+adoeminOiJsiwgZmFsc2Ug5YiZ5LiN5pi+56S6XHJcbiAgICogQHNwbGl0Q29sb3IgeOi9tOe9keagvOe6v+adoeminOiJsiwgZmFsc2Ug5YiZ5LiN5pi+56S6LCDpu5jorqR0cnVlXHJcbiAgICogQHJvdGF0ZSDliLvluqbmoIfnrb7ml4vovazop5LluqZcclxuICAgKiBAaXNUaWNrIOaYr+WQpuaYvuekuuWdkOagh+i9tOWIu+W6plxyXG4gICAqL1xyXG4gIHhBeGlzPzogeEF4aXNQcm9wcztcclxuICAvKipcclxuICAgKiB5IOi9tOmFjee9rlxyXG4gICAqIEBuYW1lIOWdkOagh+i9tOWQjeensFxyXG4gICAqIEBjb2xvciDmloflrZfpopzoibJcclxuICAgKiBAc2l6ZSDmloflrZflpKflsI9cclxuICAgKiBAbGluZUNvbG9yIHnovbTovbTnur/nur/mnaHpopzoibIsIGZhbHNlIOWImeS4jeaYvuekulxyXG4gICAqIEBzcGxpdENvbG9yIHnovbTnvZHmoLznur/mnaHpopzoibIsIGZhbHNlIOWImeS4jeaYvuekuiwg6buY6K6kZmFsc2VcclxuICAgKi9cclxuICB5QXhpcz86IHlBeGlzUHJvcHM7XHJcbiAgZ3JpZD86IEdyaWRDb21wb25lbnRPcHRpb247XHJcbiAgb25DbGljaz86ICh2OiBhbnkpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmNvbnN0IEVDaGFydHNMaW5lID0gKHByb3BzOiBMaW5lQmFzZVByb3BzKSA9PiB7XHJcbiAgY29uc3Qge1xyXG4gICAgd2lkdGggPSAnMTAwJScsXHJcbiAgICBoZWlnaHQgPSAnMTAwJScsXHJcbiAgICBzbW9vdGggPSBmYWxzZSxcclxuICAgIGNvbG9ycyA9IFsnIzU0NzBjNicsICcjOTFjYzc1JywgJyNmYWM4NTgnLCAnI2VlNjY2NicsICcjNzNjMGRlJywgJyMzYmEyNzInLCAnI2ZjODQ1MicsICcjOWE2MGI0JywgJyNlYTdjY2MnXSxcclxuICAgIGNvbG9yID0gJyMzMzMnLFxyXG4gICAgbGluZUNvbG9yID0gJyNhYmI5ZDAnLFxyXG4gICAgc3BsaXRDb2xvciA9ICcjZTBlN2YzJyxcclxuICAgIGZvbnRTaXplID0gMTQsXHJcbiAgICBkYXRhID0gW10sXHJcbiAgICB4QXhpcyA9IHt9LFxyXG4gICAgeUF4aXMgPSB7fSxcclxuICAgIGdyaWQgPSB7fSxcclxuICAgIGFyZWFTdHlsZSA9IHt9LFxyXG4gICAgaXNTd2l0Y2ggPSBmYWxzZSxcclxuICAgIHN3aXRjaFRpbWUgPSAyMDAwLFxyXG4gICAgb25DbGlja1xyXG4gIH0gPSBwcm9wcztcclxuXHJcbiAgY29uc3QgY2hhcnRSZWYgPSB1c2VSZWY8YW55PihudWxsKVxyXG4gIGNvbnN0IFtteUNoYXJ0LCBzZXRNeUNoYXJ0XSA9IHVzZVN0YXRlPGFueT4obnVsbCk7XHJcbiAgY29uc3QgW2lzSGlnaF0gPSB1c2VTdGF0ZTxib29sZWFuPihmYWxzZSk7XHJcbiAgY29uc3QgW2hpZ2hJbmRleCwgc2V0SGlnaEluZGV4XSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XHJcbiAgXHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBsZXQgX215Q2hhcnQ6IGFueSA9IGVjaGFydHMuaW5pdChjaGFydFJlZi5jdXJyZW50KTtcclxuICAgIHNldE15Q2hhcnQoX215Q2hhcnQpXHJcblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgX215Q2hhcnQucmVzaXplLCBmYWxzZSk7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIF9teUNoYXJ0LnJlc2l6ZSwgZmFsc2UpO1xyXG4gICAgX215Q2hhcnQub2ZmKCdjbGljaycpO1xyXG4gICAgX215Q2hhcnQub24oJ2NsaWNrJywgKHY6IGFueSkgPT4ge1xyXG4gICAgICBvbkNsaWNrPy4odi5kYXRhKTtcclxuICAgICAgY29uc29sZS5sb2codi5kYXRhKVxyXG4gICAgfSlcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKDIpXHJcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBfbXlDaGFydC5yZXNpemUsIGZhbHNlKTtcclxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBfbXlDaGFydC5yZXNpemUsIGZhbHNlKTtcclxuICAgICAgX215Q2hhcnQuZGlzcG9zZSgpO1xyXG4gICAgfVxyXG4gIH0sIFtdKVxyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKG15Q2hhcnQpIHtcclxuICAgICAgbXlDaGFydC5jbGVhcigpO1xyXG4gICAgICBjb25zdCBfbmFtZXM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgIGRhdGEubGVuZ3RoID4gMCAmJiBkYXRhLm1hcCgoaXRlbTogYW55KSA9PiB7XHJcbiAgICAgICAgX25hbWVzLnB1c2goaXRlbS5uYW1lKTtcclxuICAgICAgfSlcclxuICAgICAgY29uc3QgX2dyaWQ6IEdyaWRDb21wb25lbnRPcHRpb24gPSB7Li4ue1xyXG4gICAgICAgIHRvcDogJzUlJyxcclxuICAgICAgICBib3R0b206ICcxMCUnLFxyXG4gICAgICAgIGxlZnQ6ICcxMCUnLFxyXG4gICAgICAgIHJpZ2h0OiAnNSUnLFxyXG4gICAgICB9LCAuLi5ncmlkfTtcclxuICAgICAgY29uc3QgX3hBeGlzOiBhbnkgPSB7XHJcbiAgICAgICAgdHlwZTogJ2NhdGVnb3J5JyxcclxuICAgICAgICBib3VuZGFyeUdhcDogZmFsc2UsXHJcbiAgICAgICAgYXhpc0xhYmVsOiB7XHJcbiAgICAgICAgICBjb2xvcjogeEF4aXMuY29sb3IgPyB4QXhpcy5jb2xvciA6IGNvbG9yLFxyXG4gICAgICAgICAgZm9udFNpemU6IHhBeGlzLmZvbnRTaXplID8geEF4aXMuZm9udFNpemUgOiBmb250U2l6ZSxcclxuICAgICAgICAgIHJvdGF0ZTogeEF4aXMucm90YXRlID8geEF4aXMucm90YXRlIDogMCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGF4aXNMaW5lOiB7XHJcbiAgICAgICAgICBzaG93OiB4QXhpcy5saW5lQ29sb3IgPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlLFxyXG4gICAgICAgICAgbGluZVN0eWxlOiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiB4QXhpcy5saW5lQ29sb3IgPyB4QXhpcy5saW5lQ29sb3IgOiBsaW5lQ29sb3IsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBheGlzVGljazoge1xyXG4gICAgICAgICAgc2hvdzogeEF4aXMuaXNUaWNrLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3BsaXRMaW5lOiB7XHJcbiAgICAgICAgICBzaG93OiB4QXhpcy5zcGxpdENvbG9yID8gdHJ1ZSA6IGZhbHNlLFxyXG4gICAgICAgICAgbGluZVN0eWxlOiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiB4QXhpcy5zcGxpdENvbG9yID8geEF4aXMuc3BsaXRDb2xvciA6IHNwbGl0Q29sb3IsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXRhOiBfbmFtZXNcclxuICAgICAgfVxyXG4gICAgICBjb25zdCBfeUF4aXM6IGFueSA9IHtcclxuICAgICAgICBuYW1lOiB5QXhpcy5uYW1lLFxyXG4gICAgICAgIHR5cGU6ICd2YWx1ZScsXHJcbiAgICAgICAgYXhpc0xhYmVsOiB7XHJcbiAgICAgICAgICBjb2xvcjogeUF4aXMuY29sb3IgPyB5QXhpcy5jb2xvciA6IGNvbG9yLFxyXG4gICAgICAgICAgZm9udFNpemU6IHlBeGlzLmZvbnRTaXplID8geUF4aXMuZm9udFNpemUgOiBmb250U2l6ZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGF4aXNMaW5lOiB7XHJcbiAgICAgICAgICBzaG93OiB5QXhpcy5saW5lQ29sb3IgPT09IGZhbHNlID8gZmFsc2UgOiB0cnVlLFxyXG4gICAgICAgICAgbGluZVN0eWxlOiB7XHJcbiAgICAgICAgICAgIGNvbG9yOiB5QXhpcy5saW5lQ29sb3IgPyB5QXhpcy5saW5lQ29sb3IgOiBsaW5lQ29sb3IsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYXhpc1RpY2s6IHtcclxuICAgICAgICAgIHNob3c6IGZhbHNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3BsaXRMaW5lOiB7XHJcbiAgICAgICAgICBzaG93OiB5QXhpcy5zcGxpdENvbG9yID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZSxcclxuICAgICAgICAgIGxpbmVTdHlsZToge1xyXG4gICAgICAgICAgICBjb2xvcjogeUF4aXMuc3BsaXRDb2xvciA/IHlBeGlzLnNwbGl0Q29sb3IgOiBzcGxpdENvbG9yLFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuICAgICAgbGV0IF9hcmVhQ29sb3I6IGFueTtcclxuICAgICAgaWYgKGFyZWFTdHlsZS5pc0dyYWQpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmVhU3R5bGUuY29sb3IpICYmIGFyZWFTdHlsZS5jb2xvci5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICBfYXJlYUNvbG9yID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnbGluZWFyJyxcclxuICAgICAgICAgICAgeDogMCxcclxuICAgICAgICAgICAgeTogMCxcclxuICAgICAgICAgICAgeDI6IDAsXHJcbiAgICAgICAgICAgIHkyOiAxLFxyXG4gICAgICAgICAgICBjb2xvclN0b3BzOiBbe1xyXG4gICAgICAgICAgICAgIG9mZnNldDogMCwgY29sb3I6IGFyZWFTdHlsZS5jb2xvclswXVxyXG4gICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IDEsIGNvbG9yOiBhcmVhU3R5bGUuY29sb3JbMV1cclxuICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgIGdsb2JhbDogZmFsc2VcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX2FyZWFDb2xvciA9IHtcclxuICAgICAgICAgICAgdHlwZTogJ2xpbmVhcicsXHJcbiAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgIHk6IDAsXHJcbiAgICAgICAgICAgIHgyOiAwLFxyXG4gICAgICAgICAgICB5MjogMSxcclxuICAgICAgICAgICAgY29sb3JTdG9wczogW3tcclxuICAgICAgICAgICAgICBvZmZzZXQ6IDAsIGNvbG9yOiBjb2xvcnNbMF1cclxuICAgICAgICAgICAgfSwge1xyXG4gICAgICAgICAgICAgIG9mZnNldDogMSwgY29sb3I6ICdyZ2JhKDI1NSwyNTUsMjU1LDApJ1xyXG4gICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgZ2xvYmFsOiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBteUNoYXJ0LnNldE9wdGlvbih7XHJcbiAgICAgICAgdG9vbHRpcDoge1xyXG4gICAgICAgICAgdHJpZ2dlcjogJ2F4aXMnLFxyXG4gICAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiAwLFxyXG4gICAgICAgICAgZW50ZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgYXhpc1BvaW50ZXI6IHtcclxuICAgICAgICAgICAgdHlwZTogJ3NoYWRvdydcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbG9yOiBjb2xvcnMsXHJcbiAgICAgICAgZ3JpZDogX2dyaWQsXHJcbiAgICAgICAgeEF4aXM6IF94QXhpcyxcclxuICAgICAgICB5QXhpczogX3lBeGlzLFxyXG4gICAgICAgIHNlcmllczogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICB0eXBlOiAnbGluZScsXHJcbiAgICAgICAgICAgIHNtb290aDogc21vb3RoLFxyXG4gICAgICAgICAgICBhcmVhU3R5bGU6IGFyZWFTdHlsZS5zaG93ID8ge1xyXG4gICAgICAgICAgICAgIGNvbG9yOiBfYXJlYUNvbG9yXHJcbiAgICAgICAgICAgIH0gOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGxpbmVTdHlsZToge1xyXG4gICAgICAgICAgICAgIHdpZHRoOiAxXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICAgIH0sIHRydWUpO1xyXG4gICAgfVxyXG4gIH0sIFtteUNoYXJ0LCBkYXRhXSlcclxuICBcclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgbGV0IGZhdWx0QnlIb3VyVGltZTogYW55O1xyXG4gICAgaWYgKG15Q2hhcnQgJiYgaXNTd2l0Y2ggJiYgIWlzSGlnaCAmJiBkYXRhLmxlbmd0aCA+IDApIHtcclxuICAgICAgZmF1bHRCeUhvdXJUaW1lID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgIHNldEhpZ2hJbmRleChuID0+IHtcclxuICAgICAgICAgIG15Q2hhcnQuZGlzcGF0Y2hBY3Rpb24oe1xyXG4gICAgICAgICAgICB0eXBlOiAnc2hvd1RpcCcsXHJcbiAgICAgICAgICAgIHNlcmllc0luZGV4OiAwLFxyXG4gICAgICAgICAgICBkYXRhSW5kZXg6IG5cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgaWYgKG4gPj0gZGF0YS5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG4gKyAxXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfSwgc3dpdGNoVGltZSlcclxuICAgIH1cclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoZmF1bHRCeUhvdXJUaW1lKVxyXG4gICAgfVxyXG4gIH0sIFtteUNoYXJ0LCBpc1N3aXRjaCwgaXNIaWdoLCBkYXRhXSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgcmVmPXtjaGFydFJlZn1cclxuICAgICAgc3R5bGU9e3tcclxuICAgICAgICAnd2lkdGgnOiB3aWR0aCxcclxuICAgICAgICAnaGVpZ2h0JzogaGVpZ2h0XHJcbiAgICAgIH19PlxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBFQ2hhcnRzTGluZTsiXX0=